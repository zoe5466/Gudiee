(()=>{var e={};e.id=2484,e.ids=[2484],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>a});var i=r(50482),s=r(69108),n=r(62563),o=r.n(n),l=r(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let a=["",{children:["admin",{children:["cms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25446)),"/Users/zoechang/projects/Guidee/src/app/admin/cms/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58185)),"/Users/zoechang/projects/Guidee/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/zoechang/projects/Guidee/src/app/admin/cms/page.tsx"],m="/admin/cms/page",h={require:r,loadChunk:()=>Promise.resolve()},g=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/cms/page",pathname:"/admin/cms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},87807:(e,t,r)=>{Promise.resolve().then(r.bind(r,61996))},61996:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var i=r(95344),s=r(3729),n=r(22254),o=r(62455),l=r(37121),d=r(53148),a=r(46064),c=r(50340),m=r(13746),h=r(55794),g=r(4792),u=r(51838),p=r(28765),x=r(75695),b=r(38271),y=r(20862),f=r(8561),j=r(39669),v=r(82424),w=r(6911),C=r(20016),k=r(20439),S=r(34826),z=r(14513),R=r(31498);function A({initialContent:e="",title:t="",onSave:r,onCancel:n,className:o=""}){let[l,a]=(0,s.useState)(e),[c,m]=(0,s.useState)(t),[h,g]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),x=(0,s.useRef)(null),b=e=>{let t=x.current;if(!t)return;let r=t.selectionStart,i=t.selectionEnd,s=l.substring(r,i),n=s;switch(e){case"bold":n=`**${s}**`;break;case"italic":n=`*${s}*`;break;case"underline":n=`<u>${s}</u>`;break;case"link":n=`[${s||"連結文字"}](https://example.com)`;break;case"image":n=`![${s||"圖片描述"}](圖片網址)`;break;case"list":n=s.split("\n").map(e=>e.trim()?`- ${e}`:e).join("\n");break;case"heading":n=`## ${s||"標題"}`;break;case"code":n=`\`${s}\``}a(l.substring(0,r)+n+l.substring(i)),setTimeout(()=>{t.focus();let e=r+n.length;t.setSelectionRange(e,e)},0)},A=async()=>{p(!0);try{await r(l,c)}catch(e){}finally{p(!1)}};return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"600px",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},className:o,children:[i.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb"},children:i.jsx("input",{type:"text",placeholder:"輸入標題...",value:c,onChange:e=>m(e.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",fontSize:"1.125rem",fontWeight:"600",outline:"none"},className:"focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:"#f8fafc",borderBottom:"1px solid #e5e7eb",flexWrap:"wrap"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"0.25rem"},children:[i.jsx("button",{onClick:()=>b("bold"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"粗體",children:i.jsx(y.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("italic"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"斜體",children:i.jsx(f.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("underline"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"底線",children:i.jsx(j.Z,{style:{width:"1rem",height:"1rem"}})})]}),i.jsx("div",{style:{width:"1px",height:"1.5rem",backgroundColor:"#e5e7eb"}}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.25rem"},children:[i.jsx("button",{onClick:()=>b("heading"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"標題",children:i.jsx(v.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("link"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"連結",children:i.jsx(w.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("image"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"圖片",children:i.jsx(C.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("list"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"清單",children:i.jsx(k.Z,{style:{width:"1rem",height:"1rem"}})}),i.jsx("button",{onClick:()=>b("code"),style:{padding:"0.5rem",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-100",title:"程式碼",children:i.jsx(S.Z,{style:{width:"1rem",height:"1rem"}})})]}),i.jsx("div",{style:{width:"1px",height:"1.5rem",backgroundColor:"#e5e7eb"}}),(0,i.jsxs)("button",{onClick:()=>g(!h),style:{padding:"0.5rem 1rem",backgroundColor:h?"#3b82f6":"white",color:h?"white":"#374151",border:"1px solid #e5e7eb",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},className:"hover:bg-gray-100",children:[i.jsx(d.Z,{style:{width:"1rem",height:"1rem"}}),h?"編輯":"預覽"]}),(0,i.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"0.5rem"},children:[n&&(0,i.jsxs)("button",{onClick:n,style:{padding:"0.5rem 1rem",backgroundColor:"white",color:"#6b7280",border:"1px solid #e5e7eb",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},className:"hover:bg-gray-50",children:[i.jsx(z.Z,{style:{width:"1rem",height:"1rem"}}),"取消"]}),(0,i.jsxs)("button",{onClick:A,disabled:u||!c.trim()||!l.trim(),style:{padding:"0.5rem 1rem",backgroundColor:c.trim()&&l.trim()?"#10b981":"#e5e7eb",color:c.trim()&&l.trim()?"white":"#9ca3af",border:"none",borderRadius:"0.375rem",cursor:c.trim()&&l.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},className:"hover:bg-green-600",children:[i.jsx(R.Z,{style:{width:"1rem",height:"1rem"}}),u?"保存中...":"保存"]})]})]}),i.jsx("div",{style:{flex:1,display:"flex"},children:h?(0,i.jsxs)("div",{style:{width:"100%",height:"100%",padding:"1rem",overflowY:"auto",backgroundColor:"#fafafa"},children:[c&&i.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"1.5rem",paddingBottom:"0.5rem",borderBottom:"2px solid #e5e7eb"},children:c}),i.jsx("div",{style:{lineHeight:"1.7",color:"#374151"},dangerouslySetInnerHTML:{__html:l?l.replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/<u>(.*?)<\/u>/g,"<u>$1</u>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" style="max-width: 100%; height: auto;" />').replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/g,"<ul>$1</ul>").replace(/\n/g,"<br>"):'<p style="color: #9ca3af; font-style: italic;">暫無內容</p>'}})]}):i.jsx("textarea",{ref:x,value:l,onChange:e=>a(e.target.value),placeholder:"開始撰寫內容... 支援 Markdown 語法",style:{width:"100%",height:"100%",padding:"1rem",border:"none",outline:"none",resize:"none",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"0.875rem",lineHeight:"1.6"}})}),(0,i.jsxs)("div",{style:{padding:"0.5rem 1rem",backgroundColor:"#f8fafc",borderTop:"1px solid #e5e7eb",fontSize:"0.75rem",color:"#6b7280",display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)("span",{children:["字數：",l.length]}),(0,i.jsxs)("span",{children:["行數：",l.split("\n").length]})]})]})}function I({userRole:e,className:t=""}){let[r,n]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)(""),[C,k]=(0,s.useState)("all"),[S,z]=(0,s.useState)("all"),[R,I]=(0,s.useState)("updatedAt"),[B,W]=(0,s.useState)("desc");(0,s.useEffect)(()=>{let e=[{id:"1",title:"台北101導覽服務介紹",content:"# 台北101導覽服務\n\n台北101是台北最著名的地標建築...",type:"service",status:"published",author:{id:"u1",name:"張小明"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20"),publishedAt:new Date("2024-01-20"),tags:["台北","觀光","地標"],slug:"taipei-101-tour",excerpt:"專業地陪帶您深度探索台北101...",featuredImage:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4"},{id:"2",title:"台灣旅遊安全指南",content:"# 台灣旅遊安全指南\n\n在台灣旅遊時，安全是最重要的...",type:"article",status:"published",author:{id:"u2",name:"李美麗"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15"),publishedAt:new Date("2024-01-15"),tags:["安全","旅遊","指南"],slug:"taiwan-travel-safety-guide",excerpt:"旅遊安全須知和注意事項..."},{id:"3",title:"關於 Guidee 平台",content:"# 關於我們\n\nGuidee 是台灣首創的地陪媒合平台...",type:"page",status:"published",author:{id:"u3",name:"王大華"},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-12"),publishedAt:new Date("2024-01-05"),tags:["公司","介紹"],slug:"about-guidee",excerpt:"Guidee 平台介紹和使命..."},{id:"4",title:"如何成為認證導遊",content:"# 成為認證導遊的步驟\n\n想要成為 Guidee 認證導遊嗎？...",type:"guide",status:"draft",author:{id:"u1",name:"張小明"},createdAt:new Date("2024-01-25"),updatedAt:new Date("2024-01-25"),tags:["導遊","認證","教學"],slug:"how-to-become-certified-guide",excerpt:"詳細介紹導遊認證流程..."}];n(e),l(e),c(!1)},[]),(0,s.useEffect)(()=>{let e=r.filter(e=>{let t=e.title.toLowerCase().includes(v.toLowerCase())||e.excerpt?.toLowerCase().includes(v.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(v.toLowerCase())),r="all"===C||e.type===C,i="all"===S||e.status===S;return t&&r&&i});e.sort((e,t)=>{let r=0;switch(R){case"title":r=e.title.localeCompare(t.title);break;case"createdAt":r=e.createdAt.getTime()-t.createdAt.getTime();break;default:r=e.updatedAt.getTime()-t.updatedAt.getTime()}return"desc"===B?-r:r}),l(e)},[r,v,C,S,R,B]);let _=async(e,t)=>{if(f){let r={id:Date.now().toString(),title:t,content:e,type:"article",status:"draft",author:{id:"current-user",name:"當前用戶"},createdAt:new Date,updatedAt:new Date,tags:[],slug:t.toLowerCase().replace(/[^a-z0-9\u4e00-\u9fa5]/g,"-"),excerpt:e.substring(0,100)+"..."};n(e=>[r,...e]),j(!1)}else m&&(n(r=>r.map(r=>r.id===m.id?{...r,title:t,content:e,updatedAt:new Date}:r)),y(!1),h(null))},Z=e=>{confirm("確定要刪除這個內容嗎？")&&n(t=>t.filter(t=>t.id!==e))},T=(e,t)=>{n(r=>r.map(r=>r.id===e?{...r,status:t,publishedAt:"published"===t?new Date:r.publishedAt,updatedAt:new Date}:r))},N=e=>{switch(e){case"published":return"#10b981";case"draft":return"#f59e0b";default:return"#6b7280"}},$=e=>{switch(e){case"article":return"文章";case"page":return"頁面";case"service":return"服務";case"guide":return"指南";default:return e}},D=e=>new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e);return a?i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:i.jsx("div",{style:{width:"2rem",height:"2rem",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):f||g?i.jsx(A,{initialContent:m?.content||"",title:m?.title||"",onSave:_,onCancel:()=>{j(!1),y(!1),h(null)},className:t}):(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},className:t,children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#111827",margin:0},children:"內容管理"}),i.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0"},children:"管理網站內容，包括文章、頁面、服務和指南"})]}),("admin"===e||"editor"===e)&&(0,i.jsxs)("button",{onClick:()=>j(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},className:"hover:bg-blue-600",children:[i.jsx(u.Z,{style:{width:"1rem",height:"1rem"}}),"新增內容"]})]}),i.jsx("div",{style:{padding:"1rem 1.5rem",backgroundColor:"#f8fafc",borderBottom:"1px solid #e5e7eb"},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto auto",gap:"1rem",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{position:"relative"},children:[i.jsx(p.Z,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1rem",height:"1rem",color:"#9ca3af"}}),i.jsx("input",{type:"text",placeholder:"搜尋標題、內容或標籤...",value:v,onChange:e=>w(e.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",fontSize:"0.875rem",outline:"none"},className:"focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),(0,i.jsxs)("select",{value:C,onChange:e=>k(e.target.value),style:{padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",cursor:"pointer"},children:[i.jsx("option",{value:"all",children:"所有類型"}),i.jsx("option",{value:"article",children:"文章"}),i.jsx("option",{value:"page",children:"頁面"}),i.jsx("option",{value:"service",children:"服務"}),i.jsx("option",{value:"guide",children:"指南"})]}),(0,i.jsxs)("select",{value:S,onChange:e=>z(e.target.value),style:{padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",cursor:"pointer"},children:[i.jsx("option",{value:"all",children:"所有狀態"}),i.jsx("option",{value:"published",children:"已發布"}),i.jsx("option",{value:"draft",children:"草稿"}),i.jsx("option",{value:"archived",children:"已封存"})]}),(0,i.jsxs)("select",{value:`${R}-${B}`,onChange:e=>{let[t,r]=e.target.value.split("-");I(t),W(r)},style:{padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",cursor:"pointer"},children:[i.jsx("option",{value:"updatedAt-desc",children:"最近更新"}),i.jsx("option",{value:"createdAt-desc",children:"最近創建"}),i.jsx("option",{value:"title-asc",children:"標題 A-Z"}),i.jsx("option",{value:"title-desc",children:"標題 Z-A"})]})]})}),(0,i.jsxs)("div",{style:{overflowX:"auto"},children:[(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#f8fafc"},children:[i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"標題"}),i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"類型"}),i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"狀態"}),i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"作者"}),i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"更新時間"}),i.jsx("th",{style:{padding:"0.75rem 1.5rem",textAlign:"right",fontSize:"0.75rem",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em"},children:"操作"})]})}),i.jsx("tbody",{children:o.map(t=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[i.jsx("td",{style:{padding:"1rem 1.5rem"},children:(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827",marginBottom:"0.25rem"},children:t.title}),t.excerpt&&i.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.excerpt}),t.tags.length>0&&(0,i.jsxs)("div",{style:{display:"flex",gap:"0.25rem",marginTop:"0.5rem",flexWrap:"wrap"},children:[t.tags.slice(0,3).map((e,t)=>i.jsx("span",{style:{padding:"0.125rem 0.375rem",backgroundColor:"#f3f4f6",color:"#6b7280",borderRadius:"0.25rem",fontSize:"0.625rem"},children:e},t)),t.tags.length>3&&(0,i.jsxs)("span",{style:{fontSize:"0.625rem",color:"#9ca3af"},children:["+",t.tags.length-3]})]})]})}),i.jsx("td",{style:{padding:"1rem 1.5rem"},children:i.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#f0f9ff",color:"#0369a1",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"500"},children:$(t.type)})}),i.jsx("td",{style:{padding:"1rem 1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{style:{width:"0.5rem",height:"0.5rem",backgroundColor:N(t.status),borderRadius:"50%"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:"published"===t.status?"已發布":"draft"===t.status?"草稿":"已封存"})]})}),i.jsx("td",{style:{padding:"1rem 1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{style:{width:"1.5rem",height:"1.5rem",backgroundColor:"#e5e7eb",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280"},children:t.author.name.charAt(0)}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#374151"},children:t.author.name})]})}),i.jsx("td",{style:{padding:"1rem 1.5rem"},children:i.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:D(t.updatedAt)})}),i.jsx("td",{style:{padding:"1rem 1.5rem",textAlign:"right"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"flex-end"},children:[i.jsx("button",{style:{padding:"0.375rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer"},className:"hover:bg-gray-100",title:"查看",children:i.jsx(d.Z,{style:{width:"1rem",height:"1rem",color:"#6b7280"}})}),("admin"===e||"editor"===e||"current-user"===t.author.id)&&i.jsx("button",{onClick:()=>{h(t),y(!0)},style:{padding:"0.375rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer"},className:"hover:bg-gray-100",title:"編輯",children:i.jsx(x.Z,{style:{width:"1rem",height:"1rem",color:"#6b7280"}})}),("admin"===e||"editor"===e)&&(0,i.jsxs)("select",{value:t.status,onChange:e=>T(t.id,e.target.value),style:{padding:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"0.25rem",fontSize:"0.75rem",backgroundColor:"white",cursor:"pointer"},children:[i.jsx("option",{value:"draft",children:"草稿"}),i.jsx("option",{value:"published",children:"發布"}),i.jsx("option",{value:"archived",children:"封存"})]}),("admin"===e||"current-user"===t.author.id)&&i.jsx("button",{onClick:()=>Z(t.id),style:{padding:"0.375rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer"},className:"hover:bg-red-50",title:"刪除",children:i.jsx(b.Z,{style:{width:"1rem",height:"1rem",color:"#ef4444"}})})]})})]},t.id))})]}),0===o.length&&(0,i.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDCC4"}),i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"500",marginBottom:"0.5rem"},children:"找不到內容"}),i.jsx("p",{children:"嘗試調整搜尋條件或篩選器"})]})]})]})}var B=r(2582);function W(){let e=(0,n.useRouter)(),{user:t,isAuthenticated:r}=(0,B.a)(),{t:u}=(0,o.Q)(),[p,x]=(0,s.useState)("overview"),[b,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!r){e.push("/auth/login?redirect=/admin/cms");return}if(t?.role!=="admin"&&t?.role!=="guide"){e.push("/");return}y(!1)},[r,t,e]);let f={totalContent:247,publishedContent:189,draftContent:58,monthlyViews:12589,monthlyViewsGrowth:15.3,topContent:[{title:"台北101導覽服務",views:1249,type:"服務"},{title:"台灣旅遊安全指南",views:987,type:"文章"},{title:"九份老街文化之旅",views:834,type:"服務"},{title:"關於 Guidee 平台",views:756,type:"頁面"},{title:"如何成為認證導遊",views:623,type:"指南"}]};return b?i.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{width:"3rem",height:"3rem",border:"3px solid rgba(255, 255, 255, 0.3)",borderTop:"3px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):i.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1rem"},children:(0,i.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"1.5rem",border:"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",margin:0,marginBottom:"0.5rem"},children:u("admin.cms.title")}),i.jsx("p",{style:{fontSize:"1rem",color:"#6b7280",margin:0},children:u("admin.cms.description")})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[i.jsx(h.Z,{style:{width:"1rem",height:"1rem"}}),new Date().toLocaleDateString("zh-TW")]}),i.jsx("div",{style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500"},children:t?.role==="admin"?"管理員":"編輯者"})]})]}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[{key:"overview",label:u("admin.cms.overview"),icon:c.Z},{key:"content",label:u("admin.cms.content_management"),icon:l.Z},{key:"analytics",label:u("admin.cms.analytics"),icon:a.Z},{key:"settings",label:u("admin.cms.system_settings"),icon:m.Z}].map(({key:e,label:t,icon:r})=>(0,i.jsxs)("button",{onClick:()=>x(e),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:p===e?"#3b82f6":"transparent",color:p===e?"white":"#6b7280",border:"1px solid",borderColor:p===e?"#3b82f6":"#e5e7eb",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-50",children:[i.jsx(r,{style:{width:"1rem",height:"1rem"}}),t]},e))})]}),i.jsx("div",{style:{marginBottom:"2rem"},children:(()=>{switch(p){case"overview":return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:i.jsx("div",{style:{width:"3rem",height:"3rem",backgroundColor:"#dbeafe",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(l.Z,{style:{width:"1.5rem",height:"1.5rem",color:"#3b82f6"}})})}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"0.25rem"},children:f.totalContent}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:u("admin.cms.total_content")})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:i.jsx("div",{style:{width:"3rem",height:"3rem",backgroundColor:"#dcfce7",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(d.Z,{style:{width:"1.5rem",height:"1.5rem",color:"#10b981"}})})}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"0.25rem"},children:f.publishedContent}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:u("admin.cms.published_content")})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:i.jsx("div",{style:{width:"3rem",height:"3rem",backgroundColor:"#fef3c7",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(l.Z,{style:{width:"1.5rem",height:"1.5rem",color:"#f59e0b"}})})}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"0.25rem"},children:f.draftContent}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:u("admin.cms.draft_content")})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("div",{style:{width:"3rem",height:"3rem",backgroundColor:"#fce7f3",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(a.Z,{style:{width:"1.5rem",height:"1.5rem",color:"#ec4899"}})}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#10b981",fontSize:"0.875rem",fontWeight:"500"},children:[i.jsx(a.Z,{style:{width:"1rem",height:"1rem"}}),"+",f.monthlyViewsGrowth,"%"]})]}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"0.25rem"},children:f.monthlyViews.toLocaleString()}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:u("admin.cms.monthly_views")})]})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:[i.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:u("admin.cms.popular_content")})}),i.jsx("div",{style:{padding:"1rem"},children:f.topContent.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:t<f.topContent.length-1?"0.5rem":0},className:"hover:bg-gray-50",children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"1.5rem",height:"1.5rem",backgroundColor:"#f3f4f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280"},children:t+1}),(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:e.title}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:e.type})]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:[i.jsx(d.Z,{style:{width:"0.875rem",height:"0.875rem"}}),e.views.toLocaleString()]})]},t))})]})]});case"content":return i.jsx(I,{userRole:t?.role==="admin"?"admin":"editor"});case"analytics":return(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"2rem",textAlign:"center"},children:[i.jsx(c.Z,{style:{width:"4rem",height:"4rem",color:"#d1d5db",margin:"0 auto 1rem"}}),i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.5rem"},children:u("admin.cms.analytics_coming_soon")}),i.jsx("p",{style:{color:"#6b7280"},children:u("admin.cms.analytics_description")})]});case"settings":return(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",padding:"2rem",textAlign:"center"},children:[i.jsx(m.Z,{style:{width:"4rem",height:"4rem",color:"#d1d5db",margin:"0 auto 1rem"}}),i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.5rem"},children:u("admin.cms.settings_coming_soon")}),i.jsx("p",{style:{color:"#6b7280"},children:u("admin.cms.settings_description")})]});default:return null}})()}),i.jsx(g.d8,{showBackButton:!0,backButtonText:"返回首頁"})]})})}},4792:(e,t,r)=>{"use strict";r.d(t,{L6:()=>d,d8:()=>o,us:()=>l});var i=r(95344),s=r(22254),n=r(71532);function o({showBackButton:e=!1,backButtonText:t="返回",showHomeButton:r=!0,homeButtonText:o="回到首頁",customBackAction:l}){let d=(0,s.useRouter)();return(0,i.jsxs)(i.Fragment,{children:[r&&i.jsx("div",{style:{position:"absolute",top:"1rem",left:"1rem",zIndex:50},className:"sm:top-8 sm:left-8",children:(0,i.jsxs)("button",{onClick:()=>{d.push("/")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",transition:"all 0.2s",fontSize:"0.75rem",fontWeight:"500",color:"#374151",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},className:"hover:bg-white hover:shadow-md sm:text-sm sm:px-4 sm:py-3",children:[(0,i.jsxs)("span",{className:"hidden sm:inline",children:["← ",o]}),i.jsx("span",{className:"sm:hidden",children:"← 首頁"})]})}),e&&i.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem 1.5rem",paddingTop:r?"4rem":"1rem"},children:(0,i.jsxs)("button",{onClick:()=>{l?l():d.back()},style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",background:"none",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"color 0.2s",padding:"0.5rem 0"},className:"hover:text-gray-900",children:[i.jsx(n.Z,{style:{width:"1.25rem",height:"1.25rem"}}),i.jsx("span",{children:t})]})})]})}function l({text:e="回到首頁"}){return i.jsx(o,{showHomeButton:!0,homeButtonText:e,showBackButton:!1})}function d({backButtonText:e="返回",homeButtonText:t="回到首頁",customBackAction:r}){return i.jsx(o,{showHomeButton:!0,showBackButton:!0,backButtonText:e,homeButtonText:t,customBackAction:r})}},25446:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>o});let i=(0,r(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/app/admin/cms/page.tsx`),{__esModule:s,$$typeof:n}=i,o=i.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1216,8039,4757,4471],()=>r(39019));module.exports=i})();