"use strict";(()=>{var e={};e.id=2807,e.ids=[2807],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},41807:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>b,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>j,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>y});var i={};t.r(i),t.d(i,{GET:()=>d,PUT:()=>f});var o=t(95419),s=t(69108),a=t(99678),u=t(78070),n=t(46082),l=t.n(n);let p=[{id:"1",email:"user@guidee.com",password:"$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi",name:"測試用戶",role:"traveler",isEmailVerified:!0,isKYCVerified:!1,createdAt:"2024-01-01T00:00:00.000Z",profile:{phone:"0912345678",bio:"我是一個喜歡旅遊的人",location:"台北市",languages:["中文","英文"],specialties:[]}},{id:"2",email:"guide@guidee.com",password:"$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi",name:"專業地陪",role:"guide",isEmailVerified:!0,isKYCVerified:!0,createdAt:"2024-01-01T00:00:00.000Z",profile:{phone:"0987654321",bio:"專業導遊，熟悉台北各大景點",location:"台北市",languages:["中文","英文","日文"],specialties:["文化導覽","美食體驗","攝影指導"]}}];function c(e){try{let r=e.headers.get("authorization");if(!r?.startsWith("Bearer "))return null;let t=r.substring(7),i=l().verify(t,process.env.JWT_SECRET||"fallback-secret");return p.find(e=>e.id===i.userId)}catch{return null}}async function d(e){try{let r=c(e);if(!r)return u.Z.json({error:"未授權訪問"},{status:401});let{password:t,...i}=r;return u.Z.json(i)}catch(e){return u.Z.json({error:"服務器錯誤"},{status:500})}}async function f(e){try{let r=c(e);if(!r)return u.Z.json({error:"未授權訪問"},{status:401});let t=await e.json(),i={};for(let e of["name","avatar","profile"])void 0!==t[e]&&(i[e]=t[e]);Object.assign(r,i),t.profile&&(r.profile={...r.profile,...t.profile});let{password:o,...s}=r;return u.Z.json(s)}catch(e){return u.Z.json({error:"服務器錯誤"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/users/profile/route",pathname:"/api/users/profile",filename:"route",bundlePath:"app/api/users/profile/route"},resolvedPagePath:"/Users/zoechang/projects/Guidee/src/app/api/users/profile/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:j,headerHooks:v,staticGenerationBailout:y}=g,b="/api/users/profile/route";function x(){return(0,a.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:m})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[1216],()=>t(41807));module.exports=i})();