(()=>{var e={};e.id=235,e.ids=[235],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83386:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=t(50482),r=t(69108),i=t(62563),n=t.n(i),l=t(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["(main)",{children:["favorites",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3811)),"/Users/zoechang/projects/Guidee/src/app/(main)/favorites/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/zoechang/projects/Guidee/src/app/(main)/favorites/page.tsx"],m="/(main)/favorites/page",g={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(main)/favorites/page",pathname:"/favorites",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},130:(e,s,t)=>{Promise.resolve().then(t.bind(t,98353))},98353:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(95344),r=t(3729),i=t(28765),n=t(17418),l=t(13012),c=t(20439),o=t(51354),d=t(80508),m=t(25545),g=t(89895),x=t(58604),u=t(87205),p=t(58378),h=t(20783),f=t.n(h);function v(){let{favorites:e,removeFromFavorites:s}=(0,x.R)(),[t,h]=(0,r.useState)("grid"),[v,j]=(0,r.useState)(""),[y,w]=(0,r.useState)(!1),N=[{id:"1",title:"台北101 & 信義區深度導覽",description:"帶您深度探索台北最精華的信義區，從台北101觀景台俯瞰整個台北盆地",location:"台北市信義區",price:800,priceUnit:"hour",rating:4.9,reviewCount:127,duration:"4小時",maxGuests:6,images:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop"],guide:{id:"guide-1",name:"小美",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=200&h=200&fit=crop&crop=face",rating:4.9,reviewCount:156,languages:["中文","英文"],responseTime:"1小時內回覆"},tags:["文化體驗","城市導覽","攝影"],isInstantBook:!0,addedAt:"2024-01-15"},{id:"2",title:"九份老街 & 金瓜石文化之旅",description:"探索台灣最美的山城，品嚐道地小吃，了解採礦歷史",location:"新北市瑞芳區",price:1200,priceUnit:"day",rating:4.8,reviewCount:89,duration:"8小時",maxGuests:4,images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop"],guide:{id:"guide-2",name:"阿明",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face",rating:4.8,reviewCount:234,languages:["中文","英文","日文"],responseTime:"2小時內回覆"},tags:["歷史文化","美食探索","山城"],isInstantBook:!1,addedAt:"2024-01-12"},{id:"3",title:"淡水老街 & 漁人碼頭夕陽之旅",description:"欣賞台灣最美夕陽，品嚐淡水阿給與鐵蛋",location:"新北市淡水區",price:600,priceUnit:"hour",rating:4.7,reviewCount:156,duration:"3小時",maxGuests:8,images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800&h=600&fit=crop"],guide:{id:"guide-3",name:"小花",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200&h=200&fit=crop&crop=face",rating:4.7,reviewCount:98,languages:["中文"],responseTime:"30分鐘內回覆"},tags:["夕陽景色","美食探索","河岸漫步"],isInstantBook:!0,addedAt:"2024-01-10"}].filter(s=>e.includes(s.id)&&(""===v||s.title.toLowerCase().includes(v.toLowerCase())||s.location.toLowerCase().includes(v.toLowerCase())||s.tags.some(e=>e.toLowerCase().includes(v.toLowerCase())))),b=e=>{s(e)};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(p.gb,{variant:"spinner",size:"lg"})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"heading-1 text-gray-900 mb-2",children:"我的收藏"}),(0,a.jsxs)("p",{className:"body-large text-gray-600",children:["您收藏的地陪服務 (",N.length,")"]})]}),a.jsx("div",{className:"card p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[a.jsx(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"搜尋收藏的服務...",value:v,onChange:e=>j(e.target.value),className:"input pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{className:"btn btn-secondary flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-4 h-4"}),"篩選"]}),(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>h("grid"),className:`p-2 rounded ${"grid"===t?"bg-white shadow-sm":""}`,children:a.jsx(l.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>h("list"),className:`p-2 rounded ${"list"===t?"bg-white shadow-sm":""}`,children:a.jsx(c.Z,{className:"w-4 h-4"})})]})]})]})}),0===N.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(o.Z,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:v?"沒有找到相關收藏":"還沒有收藏任何服務"}),a.jsx("p",{className:"text-gray-600 mb-6",children:v?"試試調整搜尋關鍵字或清除篩選條件":"開始探索並收藏您喜歡的地陪服務"}),a.jsx(f(),{href:"/search",className:"btn btn-primary",children:"探索服務"})]}):a.jsx("div",{className:"grid"===t?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:N.map(e=>(0,a.jsxs)("div",{className:`card group hover:shadow-lg transition-all duration-200 ${"list"===t?"flex gap-6":""}`,children:[(0,a.jsxs)("div",{className:`relative ${"list"===t?"w-48 h-32":"h-48"} overflow-hidden`,children:[a.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}),a.jsx("button",{onClick:()=>b(e.id),className:"absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors",children:a.jsx(o.Z,{className:"w-4 h-4 text-red-500 fill-current"})}),e.isInstantBook&&a.jsx("div",{className:"absolute top-3 left-3 bg-[#FF5A5F] text-white px-2 py-1 rounded text-xs font-medium",children:"即時預訂"})]}),(0,a.jsxs)("div",{className:`p-4 ${"list"===t?"flex-1":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("img",{src:e.guide.avatar,alt:e.guide.name,className:"w-8 h-8 rounded-full object-cover"}),a.jsx("span",{className:"text-sm text-gray-600",children:e.guide.name})]}),a.jsx(f(),{href:`/services/${e.id}`,children:a.jsx("h3",{className:"font-semibold text-gray-900 mb-2 hover:text-[#FF5A5F] transition-colors line-clamp-2",children:e.title})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.location})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(u.iG,{value:e.rating,size:"sm",readonly:!0}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.rating," (",e.reviewCount," 則評價)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.duration})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(g.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["最多 ",e.maxGuests," 人"]})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.slice(0,3).map((e,s)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:e},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["NT$ ",e.price.toLocaleString(),(0,a.jsxs)("span",{className:"text-sm text-gray-600 font-normal",children:["/","hour"===e.priceUnit?"小時":"day"===e.priceUnit?"天":"趟"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[new Date(e.addedAt).toLocaleDateString("zh-TW")," 收藏"]})]})]})]},e.id))})]})})}},58378:(e,s,t)=>{"use strict";t.d(s,{gb:()=>i});var a=t(95344);t(3729);var r=t(11453);function i({size:e="md",variant:s="spinner",className:t,text:i}){let n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},l={sm:"text-sm",md:"text-base",lg:"text-lg"};return"spinner"===s?(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center",t),children:[a.jsx("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-[#FF5A5F]",n[e])}),i&&a.jsx("p",{className:(0,r.cn)("mt-2 text-gray-600",l[e]),children:i})]}):"dots"===s?(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center",t),children:[a.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(s=>a.jsx("div",{className:(0,r.cn)("bg-[#FF5A5F] rounded-full animate-pulse","sm"===e?"w-2 h-2":"md"===e?"w-3 h-3":"w-4 h-4"),style:{animationDelay:`${.2*s}s`,animationDuration:"1.2s"}},s))}),i&&a.jsx("p",{className:(0,r.cn)("mt-2 text-gray-600",l[e]),children:i})]}):"pulse"===s?(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center justify-center",t),children:[a.jsx("div",{className:(0,r.cn)("bg-[#FF5A5F] rounded-full animate-pulse",n[e])}),i&&a.jsx("p",{className:(0,r.cn)("mt-2 text-gray-600",l[e]),children:i})]}):null}},87205:(e,s,t)=>{"use strict";t.d(s,{iG:()=>l});var a=t(95344),r=t(3729),i=t(76755),n=t(11453);function l({value:e,onChange:s,max:t=5,size:l="md",readonly:c=!1,allowHalf:o=!1,className:d,showValue:m=!1,showCount:g=!1,count:x}){let[u,p]=r.useState(null),h={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},f=e=>{!c&&s&&s(e)},v=e=>{c||p(e)},j=()=>{c||p(null)},y=s=>{let t=s+1,a=null!==u?u:e;return o?a>=t?"full":a>=t-.5?"half":"empty":a>=t?"full":"empty"};return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center space-x-1",d),children:[a.jsx("div",{className:"flex items-center",children:Array.from({length:t},(e,s)=>{let t=s+1,r=y(s);return(0,a.jsxs)("button",{type:"button",className:(0,n.cn)("relative transition-colors",!c&&"hover:scale-110 cursor-pointer",c&&"cursor-default"),onClick:()=>f(t),onMouseEnter:()=>v(t),onMouseLeave:j,disabled:c,children:[a.jsx(i.Z,{className:(0,n.cn)(h[l],"transition-colors","full"===r?"text-yellow-400 fill-yellow-400":"half"===r?"text-yellow-400":"text-gray-300")}),"half"===r&&a.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{width:"50%"},children:a.jsx(i.Z,{className:(0,n.cn)(h[l],"text-yellow-400 fill-yellow-400")})})]},s)})}),m&&a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:e.toFixed(1)}),g&&void 0!==x&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",x,")"]})]})}},58604:(e,s,t)=>{"use strict";t.d(s,{R:()=>i});var a=t(43158);let r={location:"",guests:2,priceRange:[0,5e3],rating:0,serviceTypes:[],languages:[]},i=(0,a.Ue)((e,s)=>({query:"",filters:r,results:[],totalResults:0,isLoading:!1,error:null,currentPage:1,pageSize:12,sortBy:"relevance",favorites:[],recentSearches:[],setQuery:s=>{e({query:s})},setFilters:s=>{e(e=>({filters:{...e.filters,...s},currentPage:1}))},resetFilters:()=>{e({filters:r,currentPage:1})},search:async()=>{let{query:t,filters:a,pageSize:r,sortBy:i}=s();e({isLoading:!0,error:null});try{let n=new URLSearchParams({q:t,location:a.location,guests:a.guests.toString(),priceMin:a.priceRange[0].toString(),priceMax:a.priceRange[1].toString(),rating:a.rating.toString(),page:"1",limit:r.toString(),sortBy:i});a.date&&n.append("date",a.date.toISOString()),a.endDate&&n.append("endDate",a.endDate.toISOString()),a.serviceTypes.length>0&&n.append("serviceTypes",a.serviceTypes.join(",")),a.languages.length>0&&n.append("languages",a.languages.join(","));let l=await fetch(`/api/search?${n}`);if(!l.ok)throw Error("搜尋失敗");let c=await l.json();e({results:c.results,totalResults:c.total,currentPage:1,isLoading:!1}),t.trim()&&s().addRecentSearch(t.trim())}catch(s){e({error:s instanceof Error?s.message:"搜尋發生錯誤",isLoading:!1})}},loadMore:async()=>{let{query:t,filters:a,currentPage:r,pageSize:i,sortBy:n,results:l}=s();e({isLoading:!0});try{let s=new URLSearchParams({q:t,location:a.location,guests:a.guests.toString(),priceMin:a.priceRange[0].toString(),priceMax:a.priceRange[1].toString(),rating:a.rating.toString(),page:(r+1).toString(),limit:i.toString(),sortBy:n}),c=await fetch(`/api/search?${s}`);if(!c.ok)throw Error("載入更多結果失敗");let o=await c.json();e({results:[...l,...o.results],currentPage:r+1,isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"載入更多結果發生錯誤",isLoading:!1})}},setSortBy:t=>{e({sortBy:t}),s().search()},addToFavorites:s=>{e(e=>({favorites:[...e.favorites.filter(e=>e!==s),s]}))},removeFromFavorites:s=>{e(e=>({favorites:e.favorites.filter(e=>e!==s)}))},addRecentSearch:s=>{e(e=>({recentSearches:[s,...e.recentSearches.filter(e=>e!==s)].slice(0,10)}))},clearRecentSearches:()=>{e({recentSearches:[]})}}))},3811:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/app/(main)/favorites/page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1216,8039,4757,8290],()=>t(83386));module.exports=a})();