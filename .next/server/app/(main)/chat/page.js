(()=>{var e={};e.id=1069,e.ids=[1069],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var n=r(50482),s=r(69108),i=r(62563),o=r.n(i),a=r(68300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["(main)",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77946)),"/Users/zoechang/projects/Guidee/src/app/(main)/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/zoechang/projects/Guidee/src/app/(main)/chat/page.tsx"],m="/(main)/chat/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50038:(e,t,r)=>{Promise.resolve().then(r.bind(r,92818))},92818:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(95344),s=r(3729),i=r(63024),o=r(51838),a=r(28765),l=r(35851),d=r(4792),c=r(62046),m=r(2582);function u(){let{user:e}=(0,m.a)(),[t,r]=(0,s.useState)(null),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{e&&g([{id:"guide-001",name:"張小明導遊",lastMessage:"您好！我已經安排好明天的行程，期待與您見面！",lastMessageTime:new Date(Date.now()-3e5),unreadCount:2,role:"guide",isOnline:!0},{id:"traveler-001",name:"李大華",lastMessage:"謝謝您的服務，這次旅行非常愉快！",lastMessageTime:new Date(Date.now()-72e5),unreadCount:0,role:"traveler",isOnline:!1},{id:"guide-002",name:"王美麗導遊",lastMessage:"下次有機會歡迎再來台灣！",lastMessageTime:new Date(Date.now()-864e5),unreadCount:0,role:"guide",isOnline:!0},{id:"support",name:"客服中心",lastMessage:"您的問題已經解決了嗎？如有其他需要請隨時聯繫我們。",lastMessageTime:new Date(Date.now()-2592e5),unreadCount:0,role:"support",isOnline:!0}])},[e]);let x=p.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),f=e=>{let t=new Date().getTime()-e.getTime(),r=Math.floor(t/6e4),n=Math.floor(t/36e5),s=Math.floor(t/864e5);return r<60?`${r} 分鐘前`:n<24?`${n} 小時前`:s<7?`${s} 天前`:new Intl.DateTimeFormat("zh-TW",{month:"short",day:"numeric"}).format(e)},b=e=>{switch(e){case"guide":return"#10b981";case"support":return"#3b82f6";default:return"#6b7280"}};return e?(0,n.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1rem"},children:[(0,n.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",backgroundColor:"white",borderRadius:"0.5rem",overflow:"hidden",height:"90vh",display:"flex"},children:[(0,n.jsxs)("div",{style:{width:t?"350px":"100%",borderRight:t?"1px solid #e5e7eb":"none",display:"flex",flexDirection:"column",transition:"width 0.3s ease"},children:[(0,n.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f8fafc"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("button",{onClick:()=>r(null),style:{padding:"0.5rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer",display:t?"flex":"none",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-200",children:n.jsx(i.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#6b7280"}})}),n.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827"},children:"聊天室"})]}),n.jsx("button",{style:{padding:"0.5rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},className:"hover:bg-gray-200",children:n.jsx(o.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#6b7280"}})})]}),(0,n.jsxs)("div",{style:{position:"relative"},children:[n.jsx(a.Z,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1rem",height:"1rem",color:"#9ca3af"}}),n.jsx("input",{type:"text",placeholder:"搜尋聊天室...",value:u,onChange:e=>h(e.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #e5e7eb",borderRadius:"0.5rem",fontSize:"0.875rem",backgroundColor:"white",outline:"none"},className:"focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),n.jsx("div",{style:{flex:1,overflowY:"auto"},children:0===x.length?(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[n.jsx(l.Z,{style:{width:"3rem",height:"3rem",margin:"0 auto 1rem",color:"#d1d5db"}}),n.jsx("p",{children:"尚無聊天記錄"})]}):x.map(e=>n.jsx("div",{onClick:()=>r(e),style:{padding:"1rem",borderBottom:"1px solid #f3f4f6",cursor:"pointer",backgroundColor:t?.id===e.id?"#f0f9ff":"transparent",transition:"all 0.2s"},className:"hover:bg-gray-50",children:(0,n.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,n.jsxs)("div",{style:{position:"relative"},children:[n.jsx("div",{style:{width:"3rem",height:"3rem",backgroundColor:e.avatar?"transparent":"#e5e7eb",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.125rem",fontWeight:"600",color:"#6b7280",backgroundImage:e.avatar?`url(${e.avatar})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:!e.avatar&&e.name.charAt(0).toUpperCase()}),e.isOnline&&n.jsx("div",{style:{position:"absolute",bottom:"0.125rem",right:"0.125rem",width:"0.75rem",height:"0.75rem",backgroundColor:"#10b981",borderRadius:"50%",border:"2px solid white"}}),n.jsx("div",{style:{position:"absolute",top:"-0.25rem",right:"-0.25rem",width:"1rem",height:"1rem",backgroundColor:b(e.role),borderRadius:"50%",border:"2px solid white"}})]}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",flexShrink:0},children:f(e.lastMessageTime)})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.lastMessage}),e.unreadCount>0&&n.jsx("div",{style:{width:"1.25rem",height:"1.25rem",backgroundColor:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"600",color:"white",marginLeft:"0.5rem",flexShrink:0},children:e.unreadCount>9?"9+":e.unreadCount})]})]})]})},e.id))})]}),t?n.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:n.jsx(c.f,{recipientId:t.id,recipientName:t.name,recipientAvatar:t.avatar,chatType:"support"===t.role?"customer_support":"guide_chat"})}):n.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9fafb"},children:(0,n.jsxs)("div",{style:{textAlign:"center",color:"#6b7280"},children:[n.jsx(l.Z,{style:{width:"4rem",height:"4rem",margin:"0 auto 1rem",color:"#d1d5db"}}),n.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:"選擇一個聊天室"}),n.jsx("p",{children:"點擊左側聯絡人開始對話"})]})})]}),n.jsx("div",{style:{marginTop:"1rem"},children:n.jsx(d.d8,{showBackButton:!0,backButtonText:"返回首頁"})})]}):n.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",textAlign:"center",maxWidth:"400px"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"請先登入"}),n.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"您需要登入才能使用聊天功能"}),n.jsx(d.d8,{showBackButton:!0,backButtonText:"返回首頁"})]})})}},4792:(e,t,r)=>{"use strict";r.d(t,{L6:()=>l,d8:()=>o,us:()=>a});var n=r(95344),s=r(22254),i=r(71532);function o({showBackButton:e=!1,backButtonText:t="返回",showHomeButton:r=!0,homeButtonText:o="回到首頁",customBackAction:a}){let l=(0,s.useRouter)();return(0,n.jsxs)(n.Fragment,{children:[r&&n.jsx("div",{style:{position:"absolute",top:"1rem",left:"1rem",zIndex:50},className:"sm:top-8 sm:left-8",children:(0,n.jsxs)("button",{onClick:()=>{l.push("/")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",transition:"all 0.2s",fontSize:"0.75rem",fontWeight:"500",color:"#374151",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},className:"hover:bg-white hover:shadow-md sm:text-sm sm:px-4 sm:py-3",children:[(0,n.jsxs)("span",{className:"hidden sm:inline",children:["← ",o]}),n.jsx("span",{className:"sm:hidden",children:"← 首頁"})]})}),e&&n.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem 1.5rem",paddingTop:r?"4rem":"1rem"},children:(0,n.jsxs)("button",{onClick:()=>{a?a():l.back()},style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",background:"none",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"color 0.2s",padding:"0.5rem 0"},className:"hover:text-gray-900",children:[n.jsx(i.Z,{style:{width:"1.25rem",height:"1.25rem"}}),n.jsx("span",{children:t})]})})]})}function a({text:e="回到首頁"}){return n.jsx(o,{showHomeButton:!0,homeButtonText:e,showBackButton:!1})}function l({backButtonText:e="返回",homeButtonText:t="回到首頁",customBackAction:r}){return n.jsx(o,{showHomeButton:!0,showBackButton:!0,backButtonText:e,homeButtonText:t,customBackAction:r})}},77946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});let n=(0,r(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/app/(main)/chat/page.tsx`),{__esModule:s,$$typeof:i}=n,o=n.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1216,8039,4757,8290],()=>r(6142));module.exports=n})();