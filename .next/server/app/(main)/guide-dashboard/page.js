(()=>{var e={};e.id=4604,e.ids=[4604],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},80377:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var i=t(50482),s=t(69108),o=t(62563),n=t.n(o),a=t(68300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(r,l);let d=["",{children:["(main)",{children:["guide-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,86104)),"/Users/zoechang/projects/Guidee/src/app/(main)/guide-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/zoechang/projects/Guidee/src/app/(main)/guide-dashboard/page.tsx"],m="/(main)/guide-dashboard/page",g={require:t,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/guide-dashboard/page",pathname:"/guide-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89612:(e,r,t)=>{Promise.resolve().then(t.bind(t,79224))},79224:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var i=t(95344),s=t(3729),o=t(22254),n=t(55794),a=t(25545),l=t(48411),d=t(76755),c=t(51838),m=t(53148),g=t(75695),h=t(7060),p=t(46064),x=t(89895),u=t(2582),f=t(30149),y=t(4792),b=t(58378),j=t(33311);function v(){let e=(0,o.useRouter)(),{isAuthenticated:r,user:t}=(0,u.a)(),{bookings:v,fetchBookings:w,isLoading:k}=(0,f.v)(),[S,B]=(0,s.useState)("overview"),[z,C]=(0,s.useState)({totalBookings:0,pendingBookings:0,totalEarnings:0,averageRating:0,totalReviews:0,servicesCount:0});return(0,s.useEffect)(()=>{if(!r){e.push("/login?redirect=/guide-dashboard");return}if(t?.role!=="guide"){e.push("/");return}w()},[r,t,e,w]),(0,s.useEffect)(()=>{if(v.length>0){let e=v.filter(e=>e.guideId===t?.id),r=e.reduce((e,r)=>"completed"===r.payment.status?e+r.pricing.total:e,0);C({totalBookings:e.length,pendingBookings:e.filter(e=>"PENDING"===e.status).length,totalEarnings:r,averageRating:4.8,totalReviews:25,servicesCount:3})}},[v,t]),r&&t?.role==="guide"?(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom right, #dbeafe, #ffffff, #e0e7ff)",paddingTop:"2rem",paddingBottom:"2rem"},children:[i.jsx(y.L6,{}),(0,i.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"0 1rem"},children:[(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[i.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827",marginBottom:"0.5rem"},children:"導遊控制台"}),i.jsx("p",{style:{color:"#6b7280"},children:"管理您的服務、預訂和收入"})]}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",flexWrap:"wrap"},children:[{key:"overview",label:"總覽",icon:p.Z},{key:"services",label:"我的服務",icon:x.Z},{key:"bookings",label:"預訂管理",icon:n.Z},{key:"reviews",label:"評價管理",icon:d.Z},{key:"earnings",label:"收入統計",icon:l.Z}].map(e=>{let r=e.icon;return(0,i.jsxs)("button",{onClick:()=>B(e.key),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",border:"1px solid",cursor:"pointer",transition:"all 0.2s",...S===e.key?{backgroundColor:"#2563eb",borderColor:"#2563eb",color:"white"}:{backgroundColor:"white",borderColor:"#e5e7eb",color:"#374151"}},className:S!==e.key?"hover:bg-gray-50":"",children:[i.jsx(r,{style:{width:"1rem",height:"1rem"}}),e.label]},e.key)})}),(0,i.jsxs)("div",{children:["overview"===S&&(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"1rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"總預訂數"}),i.jsx(n.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#3b82f6"}})]}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827"},children:z.totalBookings}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#10b981"},children:"+12% 較上月"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"1rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"待確認預訂"}),i.jsx(a.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#f59e0b"}})]}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827"},children:z.pendingBookings}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#f59e0b"},children:"需要處理"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"1rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"總收入"}),i.jsx(l.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#10b981"}})]}),(0,i.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827"},children:["NT$ ",z.totalEarnings.toLocaleString()]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#10b981"},children:"+8% 較上月"})]}),(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"1rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"平均評分"}),i.jsx(d.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#f59e0b"}})]}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827"},children:z.averageRating}),(0,i.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[z.totalReviews," 則評價"]})]})]}),"services"===S&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827"},children:"我的服務"}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"linear-gradient(to right, #2563eb, #4f46e5)",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:shadow-lg",children:[i.jsx(c.Z,{style:{width:"1rem",height:"1rem"}}),"新增服務"]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:[{id:"1",title:"台北101 & 信義區深度導覽",image:"https://images.unsplash.com/photo-1508150492017-3d1e63ecdfc5?w=400&h=300&fit=crop",price:800,duration:"4小時",status:"active",bookings:15,rating:4.9,lastBooked:"2024-01-15"},{id:"2",title:"九份老街文化巡禮",image:"https://images.unsplash.com/photo-1549813069-f95e44d7f498?w=400&h=300&fit=crop",price:1200,duration:"6小時",status:"active",bookings:8,rating:4.7,lastBooked:"2024-01-12"}].map(e=>(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",border:"1px solid #e5e7eb",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("img",{src:e.image,alt:e.title,style:{width:"100%",height:"12rem",objectFit:"cover"}}),(0,i.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",flex:1},children:e.title}),i.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"active"===e.status?"#dcfce7":"#fef3c7",color:"active"===e.status?"#166534":"#92400e",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500"},children:"active"===e.status?"上架中":"暫停"})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:[(0,i.jsxs)("div",{children:["價格: NT$ ",e.price]}),(0,i.jsxs)("div",{children:["時長: ",e.duration]}),(0,i.jsxs)("div",{children:["預訂: ",e.bookings," 次"]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(d.Z,{style:{width:"0.875rem",height:"0.875rem",fill:"#f59e0b",color:"#f59e0b"}}),e.rating]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsxs)("button",{style:{flex:1,padding:"0.5rem 1rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",color:"#374151",backgroundColor:"white",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-50",children:[i.jsx(m.Z,{style:{width:"0.875rem",height:"0.875rem",marginRight:"0.25rem",display:"inline"}}),"查看"]}),(0,i.jsxs)("button",{style:{flex:1,padding:"0.5rem 1rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",color:"#374151",backgroundColor:"white",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-50",children:[i.jsx(g.Z,{style:{width:"0.875rem",height:"0.875rem",marginRight:"0.25rem",display:"inline"}}),"編輯"]})]})]})]},e.id))})]}),"bookings"===S&&(()=>{let e=v.filter(e=>e.guideId===t?.id);return(0,i.jsxs)("div",{children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",marginBottom:"2rem"},children:"預訂管理"}),0===e.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:"white",borderRadius:"1rem"},children:[i.jsx(n.Z,{style:{width:"3rem",height:"3rem",color:"#9ca3af",margin:"0 auto 1rem"}}),i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.5rem"},children:"暫無預訂"}),i.jsx("p",{style:{color:"#6b7280"},children:"等待客戶預訂您的服務"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map(e=>(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"1.5rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.5rem"},children:["預訂 #",e.id]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"0.75rem",fontSize:"0.875rem",color:"#6b7280"},children:[(0,i.jsxs)("div",{children:["日期: ",new Date(e.details.date).toLocaleDateString("zh-TW")]}),(0,i.jsxs)("div",{children:["時間: ",e.details.time]}),(0,i.jsxs)("div",{children:["人數: ",e.details.guests," 人"]}),(0,i.jsxs)("div",{children:["聯絡人: ",e.details.contactInfo.name]})]})]}),(0,i.jsxs)("div",{style:{textAlign:"right"},children:[(0,i.jsxs)("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#111827"},children:["NT$ ",e.pricing.total.toLocaleString()]}),i.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"CONFIRMED"===e.status?"#dcfce7":"#fef3c7",color:"CONFIRMED"===e.status?"#166534":"#92400e",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500"},children:"PENDING"===e.status?"待確認":"CONFIRMED"===e.status?"已確認":"已完成"})]})]}),"PENDING"===e.status&&(0,i.jsxs)("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem"},children:[(0,i.jsxs)("button",{style:{padding:"0.5rem 1rem",background:"linear-gradient(to right, #10b981, #059669)",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:shadow-md",children:[i.jsx(h.Z,{style:{width:"0.875rem",height:"0.875rem",marginRight:"0.25rem",display:"inline"}}),"確認預訂"]}),i.jsx("button",{style:{padding:"0.5rem 1rem",border:"1px solid #dc2626",borderRadius:"0.375rem",color:"#dc2626",backgroundColor:"white",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-red-50",children:"拒絕預訂"})]})]},e.id))})]})})(),"reviews"===S&&(0,i.jsxs)("div",{children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",marginBottom:"2rem"},children:"評價管理"}),i.jsx(j.n,{guideId:t?.id,showDetails:!0,className:"mb-4"})]}),"earnings"===S&&(0,i.jsxs)("div",{children:[i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#111827",marginBottom:"2rem"},children:"收入統計"}),i.jsx("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"1rem",border:"1px solid #e5e7eb"},children:i.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"收入統計功能開發中..."})})]})]})]})]}):i.jsx(b.gb,{})}},4792:(e,r,t)=>{"use strict";t.d(r,{L6:()=>l,d8:()=>n,us:()=>a});var i=t(95344),s=t(22254),o=t(71532);function n({showBackButton:e=!1,backButtonText:r="返回",showHomeButton:t=!0,homeButtonText:n="回到首頁",customBackAction:a}){let l=(0,s.useRouter)();return(0,i.jsxs)(i.Fragment,{children:[t&&i.jsx("div",{style:{position:"absolute",top:"1rem",left:"1rem",zIndex:50},className:"sm:top-8 sm:left-8",children:(0,i.jsxs)("button",{onClick:()=>{l.push("/")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",transition:"all 0.2s",fontSize:"0.75rem",fontWeight:"500",color:"#374151",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},className:"hover:bg-white hover:shadow-md sm:text-sm sm:px-4 sm:py-3",children:[(0,i.jsxs)("span",{className:"hidden sm:inline",children:["← ",n]}),i.jsx("span",{className:"sm:hidden",children:"← 首頁"})]})}),e&&i.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem 1.5rem",paddingTop:t?"4rem":"1rem"},children:(0,i.jsxs)("button",{onClick:()=>{a?a():l.back()},style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",background:"none",border:"none",cursor:"pointer",fontSize:"0.875rem",transition:"color 0.2s",padding:"0.5rem 0"},className:"hover:text-gray-900",children:[i.jsx(o.Z,{style:{width:"1.25rem",height:"1.25rem"}}),i.jsx("span",{children:r})]})})]})}function a({text:e="回到首頁"}){return i.jsx(n,{showHomeButton:!0,homeButtonText:e,showBackButton:!1})}function l({backButtonText:e="返回",homeButtonText:r="回到首頁",customBackAction:t}){return i.jsx(n,{showHomeButton:!0,showBackButton:!0,backButtonText:e,homeButtonText:r,customBackAction:t})}},33311:(e,r,t)=>{"use strict";t.d(r,{n:()=>a});var i=t(95344),s=t(3729),o=t(76755),n=t(89895);function a({serviceId:e,guideId:r,className:t="",showDetails:a=!1}){let[l,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{g()},[e,r]);let g=async()=>{try{m(!0);let t=new URLSearchParams;e&&t.append("serviceId",e),r&&t.append("guideId",r),t.append("limit","1");let i=await fetch(`/api/reviews?${t.toString()}`);if(!i.ok)throw Error("獲取評價統計失敗");let s=await i.json();d(s.statistics)}catch(e){}finally{m(!1)}};return c?i.jsx("div",{className:t,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{style:{width:"5rem",height:"1rem",backgroundColor:"#e5e7eb",borderRadius:"0.25rem"}}),i.jsx("div",{style:{width:"3rem",height:"1rem",backgroundColor:"#e5e7eb",borderRadius:"0.25rem"}})]})}):l?i.jsx("div",{className:t,children:0===l.totalReviews?(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6b7280",fontSize:"0.875rem"},children:[i.jsx(o.Z,{style:{width:"1rem",height:"1rem"}}),i.jsx("span",{children:"暫無評價"})]}):(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[((e,r="md")=>{let t={sm:"w-3 h-3",md:"w-4 h-4"};return i.jsx("div",{style:{display:"flex",gap:"0.125rem"},children:[1,2,3,4,5].map(s=>i.jsx(o.Z,{style:{color:s<=e?"#f59e0b":"#e5e7eb",fill:s<=e?"#f59e0b":"none"},className:t[r]},s))})})(Math.round(l.averageRating)),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:l.averageRating})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#6b7280",fontSize:"0.875rem"},children:[i.jsx(n.Z,{style:{width:"0.875rem",height:"0.875rem"}}),(0,i.jsxs)("span",{children:[l.totalReviews," 則評價"]})]}),a&&i.jsx("div",{style:{display:"flex",gap:"0.5rem",fontSize:"0.75rem",color:"#6b7280"},children:[5,4,3,2,1].map(e=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.125rem"},children:[(0,i.jsxs)("span",{children:[e,"★"]}),(0,i.jsxs)("span",{children:["(",l.ratingDistribution[e],")"]})]},e))})]})}):null}},58378:(e,r,t)=>{"use strict";t.d(r,{gb:()=>o});var i=t(95344);t(3729);var s=t(11453);function o({size:e="md",variant:r="spinner",className:t,text:o}){let n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},a={sm:"text-sm",md:"text-base",lg:"text-lg"};return"spinner"===r?(0,i.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center",t),children:[i.jsx("div",{className:(0,s.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-[#FF5A5F]",n[e])}),o&&i.jsx("p",{className:(0,s.cn)("mt-2 text-gray-600",a[e]),children:o})]}):"dots"===r?(0,i.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center",t),children:[i.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(r=>i.jsx("div",{className:(0,s.cn)("bg-[#FF5A5F] rounded-full animate-pulse","sm"===e?"w-2 h-2":"md"===e?"w-3 h-3":"w-4 h-4"),style:{animationDelay:`${.2*r}s`,animationDuration:"1.2s"}},r))}),o&&i.jsx("p",{className:(0,s.cn)("mt-2 text-gray-600",a[e]),children:o})]}):"pulse"===r?(0,i.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center",t),children:[i.jsx("div",{className:(0,s.cn)("bg-[#FF5A5F] rounded-full animate-pulse",n[e])}),o&&i.jsx("p",{className:(0,s.cn)("mt-2 text-gray-600",a[e]),children:o})]}):null}},30149:(e,r,t)=>{"use strict";t.d(r,{v:()=>o});var i=t(43158),s=t(2582);let o=(0,i.Ue)((e,r)=>({currentBooking:null,bookingStep:"details",bookings:[],isLoading:!1,error:null,paymentIntent:null,isProcessingPayment:!1,initializeBooking:(r,t)=>{e({currentBooking:{serviceId:r,guideId:t,guests:2},bookingStep:"details",error:null})},updateBookingDetails:r=>{e(e=>({currentBooking:e.currentBooking?{...e.currentBooking,...r}:r}))},setBookingStep:r=>{e({bookingStep:r})},createBooking:async()=>{let{currentBooking:t}=r();if(!t)throw Error("沒有預訂資料");let{token:i}=s.a.getState();if(!i)throw Error("請先登入");e({isLoading:!0,error:null});try{let r=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(t)});if(!r.ok)throw Error("建立預訂失敗");let s=await r.json();return e({paymentIntent:s.paymentIntent,bookingStep:"payment",isLoading:!1}),s.bookingId}catch(r){throw e({error:r instanceof Error?r.message:"建立預訂時發生錯誤",isLoading:!1}),r}},processPayment:async(r,t)=>{let{token:i}=s.a.getState();if(!i)throw Error("請先登入");e({isProcessingPayment:!0,error:null});try{let s=await fetch("/api/bookings/payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({bookingId:r,paymentMethodId:t})});if(!s.ok)throw Error("支付處理失敗");let o=await s.json();if("succeeded"===o.status)e({bookingStep:"confirmation",isProcessingPayment:!1});else throw Error("支付未成功")}catch(r){throw e({error:r instanceof Error?r.message:"支付處理時發生錯誤",isProcessingPayment:!1}),r}},confirmBooking:async t=>{let{token:i}=s.a.getState();if(!i)throw Error("請先登入");e({isLoading:!0,error:null});try{if(!(await fetch(`/api/bookings/${t}/confirm`,{method:"POST",headers:{Authorization:`Bearer ${i}`}})).ok)throw Error("確認預訂失敗");await r().fetchBookings(),e({isLoading:!1})}catch(r){throw e({error:r instanceof Error?r.message:"確認預訂時發生錯誤",isLoading:!1}),r}},cancelBooking:async(t,i)=>{let{token:o}=s.a.getState();if(!o)throw Error("請先登入");e({isLoading:!0,error:null});try{if(!(await fetch(`/api/bookings/${t}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({reason:i})})).ok)throw Error("取消預訂失敗");await r().fetchBookings(),e({isLoading:!1})}catch(r){throw e({error:r instanceof Error?r.message:"取消預訂時發生錯誤",isLoading:!1}),r}},fetchBookings:async()=>{let{token:r}=s.a.getState();if(!r)throw Error("請先登入");e({isLoading:!0,error:null});try{let t=await fetch("/api/bookings",{headers:{Authorization:`Bearer ${r}`}});if(!t.ok)throw Error("獲取預訂列表失敗");let i=await t.json();e({bookings:i.bookings,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"獲取預訂列表時發生錯誤",isLoading:!1})}},submitReview:async(t,i,o)=>{let{token:n}=s.a.getState();if(!n)throw Error("請先登入");e({isLoading:!0,error:null});try{if(!(await fetch(`/api/bookings/${t}/review`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({rating:i,comment:o})})).ok)throw Error("提交評價失敗");await r().fetchBookings(),e({isLoading:!1})}catch(r){throw e({error:r instanceof Error?r.message:"提交評價時發生錯誤",isLoading:!1}),r}},clearCurrentBooking:()=>{e({currentBooking:null,bookingStep:"details",paymentIntent:null,error:null})},setError:r=>{e({error:r})}}))},86104:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>n});let i=(0,t(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/app/(main)/guide-dashboard/page.tsx`),{__esModule:s,$$typeof:o}=i,n=i.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[1216,8039,4757,8290],()=>t(80377));module.exports=i})();