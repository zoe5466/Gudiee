(()=>{var e={};e.id=3970,e.ids=[3970],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},76677:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>a});var r=t(50482),i=t(69108),n=t(62563),o=t.n(n),l=t(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let a=["",{children:["(main)",{children:["guide",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,60781)),"/Users/zoechang/projects/Guidee/src/app/(main)/guide/messages/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/zoechang/projects/Guidee/src/app/(main)/guide/messages/page.tsx"],m="/(main)/guide/messages/page",u={require:t,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/guide/messages/page",pathname:"/guide/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},82418:(e,s,t)=>{Promise.resolve().then(t.bind(t,21208))},21208:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(95344),i=t(3729),n=t(22254),o=t(28765),l=t(35851),d=t(40626),a=t(88209),c=t(1560),m=t(36135),u=t(2582),g=t(58378);function p(){let e=(0,n.useRouter)(),{user:s,isAuthenticated:t}=(0,u.a)(),[p,h]=(0,i.useState)([]),[x,f]=(0,i.useState)(null),[y,b]=(0,i.useState)([]),[j,v]=(0,i.useState)(""),[w,C]=(0,i.useState)(""),[I,N]=(0,i.useState)(!0),S=[{id:"conv-1",userId:"user-1",userName:"張小明",userAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",lastMessage:"請問明天的行程可以調整嗎？",lastMessageTime:"10:30",unreadCount:2,isOnline:!0,serviceTitle:"台北101 & 信義區深度導覽",bookingId:"booking-1"},{id:"conv-2",userId:"user-2",userName:"李小華",userAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",lastMessage:"謝謝您的詳細介紹！",lastMessageTime:"昨天",unreadCount:0,isOnline:!1,serviceTitle:"九份老街 & 金瓜石礦業遺址",bookingId:"booking-2"},{id:"conv-3",userId:"user-3",userName:"王大明",userAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",lastMessage:"想詢問一些當地的美食推薦",lastMessageTime:"2天前",unreadCount:1,isOnline:!0,serviceTitle:"台南古蹟巡禮 & 美食探索"}],k={"conv-1":[{id:"msg-1",content:"您好！我已經預訂了您的台北101導覽服務",senderId:"user-1",timestamp:"09:15",isRead:!0},{id:"msg-2",content:"您好！很高興為您服務。我會在約定時間準時到達集合點。",senderId:"guide-1",timestamp:"09:20",isRead:!0},{id:"msg-3",content:"請問明天的行程可以調整嗎？我想要多看一些歷史建築",senderId:"user-1",timestamp:"10:30",isRead:!1}]};(0,i.useEffect)(()=>{if(!t){e.push("/login");return}setTimeout(()=>{h(S),N(!1)},1e3)},[t,e]);let z=e=>{f(e),b(k[e]||[]),h(s=>s.map(s=>s.id===e?{...s,unreadCount:0}:s))},R=()=>{if(!j.trim()||!x)return;let e={id:`msg-${Date.now()}`,content:j,senderId:"guide-1",timestamp:new Date().toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}),isRead:!0};b(s=>[...s,e]),v(""),h(e=>e.map(e=>e.id===x?{...e,lastMessage:j,lastMessageTime:"剛剛"}:e))},P=p.find(e=>e.id===x),_=p.reduce((e,s)=>e+s.unreadCount,0);return!t||I?r.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(g.gb,{size:"lg"})}):r.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f9fafb",padding:"1.5rem"},children:(0,r.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#111827"},children:"訊息中心"}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:_>0&&(0,r.jsxs)("div",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"500"},children:[_," 則未讀"]})})]}),r.jsx("p",{style:{color:"#6b7280"},children:"與客戶即時溝通，提供優質服務體驗"})]}),(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",height:"80vh",display:"flex",overflow:"hidden"},children:[(0,r.jsxs)("div",{style:{width:"24rem",borderRight:"1px solid #e5e7eb",display:"flex",flexDirection:"column"},children:[r.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb"},children:(0,r.jsxs)("div",{style:{position:"relative"},children:[r.jsx(o.Z,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1rem",height:"1rem",color:"#9ca3af"}}),r.jsx("input",{type:"text",placeholder:"搜尋對話...",value:w,onChange:e=>C(e.target.value),style:{width:"100%",paddingLeft:"2.5rem",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.5rem",fontSize:"0.875rem",outline:"none"},className:"focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})}),r.jsx("div",{style:{flex:1,overflowY:"auto"},children:0===p.length?(0,r.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[r.jsx(l.Z,{style:{width:"3rem",height:"3rem",margin:"0 auto 1rem",color:"#d1d5db"}}),r.jsx("p",{children:"暫無對話"}),r.jsx("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"當有客戶聯繫您時，對話會顯示在這裡"})]}):p.map(e=>r.jsx("div",{onClick:()=>z(e.id),style:{padding:"1rem",cursor:"pointer",borderBottom:"1px solid #f3f4f6",backgroundColor:x===e.id?"#eff6ff":"transparent",transition:"all 0.2s"},className:"hover:bg-gray-50",children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,r.jsxs)("div",{style:{position:"relative"},children:[r.jsx("img",{src:e.userAvatar,alt:e.userName,style:{width:"3rem",height:"3rem",borderRadius:"50%",objectFit:"cover"}}),e.isOnline&&r.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",width:"0.75rem",height:"0.75rem",backgroundColor:"#10b981",borderRadius:"50%",border:"2px solid white"}})]}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.25rem"},children:[r.jsx("h3",{style:{fontWeight:"600",color:"#111827",fontSize:"0.875rem"},children:e.userName}),r.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:e.lastMessageTime})]}),e.serviceTitle&&r.jsx("p",{style:{fontSize:"0.75rem",color:"#2563eb",marginBottom:"0.25rem"},children:e.serviceTitle}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"10rem"},children:e.lastMessage}),e.unreadCount>0&&r.jsx("div",{style:{backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"1.25rem",height:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"600"},children:e.unreadCount})]})]})]})},e.id))})]}),r.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("img",{src:P.userAvatar,alt:P.userName,style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",objectFit:"cover"}}),(0,r.jsxs)("div",{children:[r.jsx("h3",{style:{fontWeight:"600",color:"#111827"},children:P.userName}),r.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:P.isOnline?"線上":"離線"})]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{style:{padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#f3f4f6",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-300",children:r.jsx(d.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#6b7280"}})}),r.jsx("button",{style:{padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#f3f4f6",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-300",children:r.jsx(a.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#6b7280"}})}),r.jsx("button",{style:{padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#f3f4f6",cursor:"pointer",transition:"all 0.2s"},className:"hover:bg-gray-300",children:r.jsx(c.Z,{style:{width:"1.25rem",height:"1.25rem",color:"#6b7280"}})})]})]}),r.jsx("div",{style:{flex:1,padding:"1.5rem",overflowY:"auto",display:"flex",flexDirection:"column",gap:"1rem"},children:y.map(e=>r.jsx("div",{style:{display:"flex",justifyContent:"guide-1"===e.senderId?"flex-end":"flex-start"},children:(0,r.jsxs)("div",{style:{maxWidth:"70%",padding:"0.75rem 1rem",borderRadius:"1rem",backgroundColor:"guide-1"===e.senderId?"#2563eb":"#f3f4f6",color:"guide-1"===e.senderId?"white":"#111827"},children:[r.jsx("p",{style:{margin:0,lineHeight:"1.5"},children:e.content}),r.jsx("p",{style:{margin:"0.25rem 0 0",fontSize:"0.75rem",opacity:.7,textAlign:"right"},children:e.timestamp})]})},e.id))}),r.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("input",{type:"text",placeholder:"輸入訊息...",value:j,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"===e.key&&R()},style:{flex:1,padding:"0.75rem 1rem",border:"1px solid #e5e7eb",borderRadius:"9999px",fontSize:"0.875rem",outline:"none"},className:"focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),r.jsx("button",{onClick:R,disabled:!j.trim(),style:{padding:"0.75rem",backgroundColor:j.trim()?"#2563eb":"#d1d5db",color:"white",border:"none",borderRadius:"50%",cursor:j.trim()?"pointer":"not-allowed",transition:"all 0.2s"},children:r.jsx(m.Z,{style:{width:"1.25rem",height:"1.25rem"}})})]})})]}):r.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("div",{style:{textAlign:"center",color:"#6b7280"},children:[r.jsx(l.Z,{style:{width:"4rem",height:"4rem",margin:"0 auto 1rem",color:"#d1d5db"}}),r.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:"選擇對話開始聊天"}),r.jsx("p",{children:"從左側選擇一個對話來查看訊息"})]})})})]})]})})}},58378:(e,s,t)=>{"use strict";t.d(s,{gb:()=>n});var r=t(95344);t(3729);var i=t(11453);function n({size:e="md",variant:s="spinner",className:t,text:n}){let o={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},l={sm:"text-sm",md:"text-base",lg:"text-lg"};return"spinner"===s?(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center",t),children:[r.jsx("div",{className:(0,i.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-[#FF5A5F]",o[e])}),n&&r.jsx("p",{className:(0,i.cn)("mt-2 text-gray-600",l[e]),children:n})]}):"dots"===s?(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center",t),children:[r.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(s=>r.jsx("div",{className:(0,i.cn)("bg-[#FF5A5F] rounded-full animate-pulse","sm"===e?"w-2 h-2":"md"===e?"w-3 h-3":"w-4 h-4"),style:{animationDelay:`${.2*s}s`,animationDuration:"1.2s"}},s))}),n&&r.jsx("p",{className:(0,i.cn)("mt-2 text-gray-600",l[e]),children:n})]}):"pulse"===s?(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center",t),children:[r.jsx("div",{className:(0,i.cn)("bg-[#FF5A5F] rounded-full animate-pulse",o[e])}),n&&r.jsx("p",{className:(0,i.cn)("mt-2 text-gray-600",l[e]),children:n})]}):null}},60781:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});let r=(0,t(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/app/(main)/guide/messages/page.tsx`),{__esModule:i,$$typeof:n}=r,o=r.default}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[1216,8039,4757,8290],()=>t(76677));module.exports=r})();