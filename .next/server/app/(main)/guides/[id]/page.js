(()=>{var e={};e.id=3413,e.ids=[3413],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},97063:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>h,tree:()=>d});var a=t(50482),l=t(69108),r=t(62563),i=t.n(r),n=t(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["(main)",{children:["guides",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41853)),"/Users/zoechang/projects/Guidee/src/app/(main)/guides/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/zoechang/projects/Guidee/src/app/(main)/guides/[id]/page.tsx"],m="/(main)/guides/[id]/page",o={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(main)/guides/[id]/page",pathname:"/guides/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1495:(e,s,t)=>{Promise.resolve().then(t.bind(t,67364))},67364:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(95344),l=t(3729),r=t(20783),i=t.n(r),n=t(71532),c=t(7060),d=t(80508),x=t(76755),m=t(89895),o=t(55794),h=t(51354),g=t(11542),u=t(30304),j=t(65187),p=t(97751),f=t(25545),N=t(35851),v=t(40626),b=t(23485);function y({guideId:e}){let[s,t]=(0,l.useState)(null),[r,y]=(0,l.useState)(!0),[w,Z]=(0,l.useState)(null),[k,P]=(0,l.useState)({}),[_,G]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let s=async()=>{try{y(!0);let s=await fetch(`/api/guides/${e}`);if(!s.ok)throw Error("Failed to fetch guide profile");let a=(await s.json()).data;t(a),Z(null)}catch(e){Z(e instanceof Error?e.message:"載入嚮導資料失敗")}finally{y(!1)}};e&&s()},[e]);let $=e=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e),q=e=>new Date(e).toLocaleDateString("zh-TW",{year:"numeric",month:"long"}),R=(e,s)=>{P(t=>({...t,[e]:((t[e]||0)+1)%s}))},A=(e,s)=>{P(t=>({...t,[e]:((t[e]||0)-1+s)%s}))};return r?a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-4",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})})}):w||!s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:w||"找不到嚮導資料"}),a.jsx(i(),{href:"/guides",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"返回嚮導列表"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-6",children:(0,a.jsxs)(i(),{href:"/guides",className:"inline-flex items-center text-gray-600 hover:text-gray-900",children:[a.jsx(n.Z,{className:"w-5 h-5 mr-1"}),"返回嚮導列表"]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-full overflow-hidden",children:s.avatar?a.jsx("img",{src:s.avatar,alt:s.name||"Guide avatar",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-4xl font-semibold",children:s.name?.charAt(0)||"?"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name||"Unknown Guide"}),s.verifications.identity&&(0,a.jsxs)("div",{className:"flex items-center px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[a.jsx(c.Z,{className:"w-3 h-3 mr-1"}),"已認證"]})]}),s.location&&(0,a.jsxs)("div",{className:"flex items-center text-gray-600 mb-3",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),s.location]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"w-5 h-5 text-yellow-400 fill-current mr-1"}),a.jsx("span",{className:"text-xl font-semibold text-gray-900",children:s.stats.averageRating}),(0,a.jsxs)("span",{className:"text-gray-600 ml-1",children:["(",s.stats.totalReviews," 評論)"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-1"}),s.stats.totalBookings," 次預訂"]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-1"}),s.experienceYears||0," 年經驗"]})]}),s.bio&&a.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.bio})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>G(!_),className:`p-2 rounded-lg transition-colors ${_?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,children:a.jsx(h.Z,{className:`w-5 h-5 ${_?"fill-current":""}`})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg",children:a.jsx(g.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.languages.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(u.Z,{className:"w-4 h-4 mr-1"}),"語言能力"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.languages.map((e,s)=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:e},s))})]}),s.specialties.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"專業領域"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.specialties.map((e,s)=>a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:e},s))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"提供的服務"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.services.map(e=>{let s=k[e.id]||0;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.images.length>0&&(0,a.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[a.jsx("img",{src:e.images[s],alt:e.title,className:"w-full h-full object-cover"}),e.images.length>1&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>A(e.id,e.images.length),className:"absolute left-2 top-1/2 transform -translate-y-1/2 p-1 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75",children:a.jsx(n.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(e.id,e.images.length),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75",children:a.jsx(p.Z,{className:"w-4 h-4"})}),a.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:e.images.map((e,t)=>a.jsx("div",{className:`w-2 h-2 rounded-full ${t===s?"bg-white":"bg-white bg-opacity-50"}`},t))})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:$(e.price)})]}),e.description&&a.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(d.Z,{className:"w-3 h-3 mr-1"}),e.location]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(f.Z,{className:"w-3 h-3 mr-1"}),e.duration," 小時"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(m.Z,{className:"w-3 h-3 mr-1"}),"最多 ",e.maxGuests," 人"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),a.jsx("span",{className:"font-medium",children:e.averageRating}),(0,a.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",e.totalReviews,")"]})]}),a.jsx(i(),{href:`/services/${e.id}`,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"查看詳情"})]})]})]},e.id)})})]}),s.recentReviews.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"最新評價"}),a.jsx("div",{className:"space-y-6",children:s.recentReviews.map(e=>a.jsx("div",{className:"border-b border-gray-100 last:border-b-0 pb-6 last:pb-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:e.isAnonymous||!e.reviewer?a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 text-sm",children:"匿"})}):a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full overflow-hidden",children:e.reviewer.avatar?a.jsx("img",{src:e.reviewer.avatar,alt:e.reviewer.name||"Reviewer avatar",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-semibold",children:e.reviewer.name?.charAt(0)||"?"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.isAnonymous||!e.reviewer?"匿名用戶":e.reviewer.name||"未知用戶"}),a.jsx("div",{className:"flex items-center",children:Array.from({length:5},(s,t)=>a.jsx(x.Z,{className:`w-4 h-4 ${t<e.rating?"text-yellow-400 fill-current":"text-gray-300"}`},t))}),a.jsx("span",{className:"text-sm text-gray-500",children:q(e.createdAt)})]}),a.jsx("p",{className:"text-gray-700 mb-2",children:e.comment}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["服務項目: ",e.service.title]})]})]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"聯繫嚮導"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"平均回覆時間"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.stats.responseTime," 小時內"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"回覆率"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.stats.responseRate,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"發送訊息"]}),s.verifications.phone&&(0,a.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"致電詢問"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"統計資料"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"總預訂數"}),a.jsx("span",{className:"font-semibold",children:s.stats.totalBookings})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"本月預訂"}),a.jsx("span",{className:"font-semibold",children:s.stats.monthlyBookings})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"活躍服務"}),a.jsx("span",{className:"font-semibold",children:s.stats.activeServices})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"加入時間"}),a.jsx("span",{className:"font-semibold",children:q(s.memberSince)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"評分分佈"}),a.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>{let t=s.ratingDistribution[e]||0,l=s.stats.totalReviews>0?t/s.stats.totalReviews*100:0;return(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm w-3",children:e}),a.jsx(x.Z,{className:"w-3 h-3 text-yellow-400 fill-current ml-1"})]}),a.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${l}%`}})}),a.jsx("span",{className:"text-sm text-gray-600 w-8",children:t})]},e)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"身份驗證"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(c.Z,{className:`w-5 h-5 ${s.verifications.email?"text-green-500":"text-gray-300"}`}),a.jsx("span",{className:"text-sm",children:"電子信箱驗證"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(c.Z,{className:`w-5 h-5 ${s.verifications.phone?"text-green-500":"text-gray-300"}`}),a.jsx("span",{className:"text-sm",children:"手機號碼驗證"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(b.Z,{className:`w-5 h-5 ${s.verifications.identity?"text-green-500":"text-gray-300"}`}),a.jsx("span",{className:"text-sm",children:"身份證件驗證"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(c.Z,{className:`w-5 h-5 ${s.verifications.profile?"text-green-500":"text-gray-300"}`}),a.jsx("span",{className:"text-sm",children:"個人檔案完整"})]})]})]})]})]})]})})}},41853:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,generateMetadata:()=>c});var a=t(25036);t(40002);let l=(0,t(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/components/guides/guide-profile.tsx`),{__esModule:r,$$typeof:i}=l,n=l.default;async function c({params:e}){try{let s=await fetch(`http://localhost:3000/api/guides/${e.id}`,{cache:"no-store"});if(s.ok){let e=await s.json();return{title:`${e.name} - 專業在地嚮導 | Guidee`,description:e.bio||`與 ${e.name} 一起探索當地，享受個人化旅遊體驗`}}}catch(e){}return{title:"嚮導檔案 | Guidee",description:"查看專業在地嚮導的詳細資料和服務"}}function d({params:e}){return a.jsx(n,{guideId:e.id})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1216,8039,4757,8290],()=>t(97063));module.exports=a})();