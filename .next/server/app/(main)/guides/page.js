(()=>{var e={};e.id=197,e.ids=[197],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16992:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var t=a(50482),r=a(69108),l=a(62563),i=a.n(l),n=a(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["(main)",{children:["guides",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,22107)),"/Users/zoechang/projects/Guidee/src/app/(main)/guides/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11808)),"/Users/zoechang/projects/Guidee/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,98890)),"/Users/zoechang/projects/Guidee/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/zoechang/projects/Guidee/src/app/(main)/guides/page.tsx"],x="/(main)/guides/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(main)/guides/page",pathname:"/guides",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97269:(e,s,a)=>{Promise.resolve().then(a.bind(a,44616))},44616:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var t=a(95344),r=a(3729),l=a(28765),i=a(17418),n=a(14513),c=a(89895),d=a(20783),o=a.n(d),x=a(51354),m=a(80508),u=a(76755),g=a(55794),p=a(35851);function h({guide:e,className:s=""}){let a=e=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e),r=Math.min(...e.guidedServices.map(e=>Number(e.price)));return(0,t.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow ${s}`,children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full overflow-hidden",children:e.avatar?t.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xl font-semibold",children:e.name.charAt(0)})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),t.jsx("button",{className:"text-gray-400 hover:text-red-500 transition-colors",children:t.jsx(x.Z,{className:"w-5 h-5"})})]}),e.userProfile.location&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[t.jsx(m.Z,{className:"w-4 h-4 mr-1"}),e.userProfile.location]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(u.Z,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.stats.averageRating}),(0,t.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:["(",e.stats.totalReviews,")"]})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(c.Z,{className:"w-4 h-4 mr-1"}),e.stats.totalBookings," 次預訂"]})]})]})]}),e.userProfile.bio&&t.jsx("p",{className:"text-gray-700 text-sm mt-4 line-clamp-2",children:e.userProfile.bio}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[e.userProfile.languages.length>0&&(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-xs text-gray-500 w-12",children:"語言:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.userProfile.languages.slice(0,3).map((e,s)=>t.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:e},s)),e.userProfile.languages.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.userProfile.languages.length-3]})]})]}),e.userProfile.specialties.length>0&&(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-xs text-gray-500 w-12",children:"專長:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.userProfile.specialties.slice(0,2).map((e,s)=>t.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-green-100 text-green-700 rounded",children:e},s)),e.userProfile.specialties.length>2&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.userProfile.specialties.length-2]})]})]})]})]}),e.guidedServices.length>0&&t.jsx("div",{className:"border-t border-gray-100",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"服務項目"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.stats.activeServices," 項服務"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.guidedServices.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.images.length>0&&t.jsx("div",{className:"w-full h-20 bg-gray-200 rounded mb-2 overflow-hidden",children:t.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"})}),t.jsx("h5",{className:"text-sm font-medium text-gray-900 line-clamp-1 mb-1",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-600 flex items-center",children:[t.jsx(m.Z,{className:"w-3 h-3 mr-1"}),e.location]}),t.jsx("span",{className:"text-sm font-semibold text-blue-600",children:a(e.price)})]})]},e.id))})]})}),(0,t.jsxs)("div",{className:"border-t border-gray-100 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["起價 ",t.jsx("span",{className:"text-lg font-semibold text-gray-900",children:a(r)})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(g.Z,{className:"w-4 h-4 mr-1"}),e.userProfile.experienceYears||0," 年經驗"]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:t.jsx(p.Z,{className:"w-4 h-4"})}),t.jsx(o(),{href:`/guides/${e.id}`,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"查看詳情"})]})]}),e.stats.responseRate>0&&(0,t.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["回覆率 ",e.stats.responseRate,"%"]})]})]})}function j({className:e=""}){let[s,a]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,g]=(0,r.useState)({page:1,limit:20,total:0,pages:0,hasNext:!1,hasPrev:!1}),[p,j]=(0,r.useState)({locations:[],languages:[],specialties:[]}),[b,v]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[P,_]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[C,Z]=(0,r.useState)(""),[q,G]=(0,r.useState)("rating"),[A,$]=(0,r.useState)("desc"),[E,z]=(0,r.useState)(!1),R=async(e=1)=>{try{o(!0);let s=new URLSearchParams({page:e.toString(),limit:u.limit.toString(),sortBy:q,sortOrder:A});b&&s.append("q",b),f&&s.append("location",f),N&&s.append("language",N),P&&s.append("specialty",P),S&&s.append("minRating",S),C&&s.append("minExperience",C);let t=await fetch(`/api/guides?${s}`);if(!t.ok)throw Error("Failed to fetch guides");let r=(await t.json()).data;a(r.guides),g(r.pagination),j(r.filters),m(null)}catch(e){m(e instanceof Error?e.message:"載入嚮導列表失敗")}finally{o(!1)}};(0,r.useEffect)(()=>{R(1)},[b,f,N,P,S,C,q,A]);let M=()=>{v(""),y(""),w(""),_(""),k(""),Z(""),G("rating"),$("desc")},U=b||f||N||P||S||C;return x?(0,t.jsxs)("div",{className:`text-center py-8 ${e}`,children:[t.jsx("div",{className:"text-red-500 mb-4",children:x}),t.jsx("button",{onClick:()=>R(u.page),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"重新載入"})]}):(0,t.jsxs)("div",{className:`${e}`,children:[t.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[t.jsx("form",{onSubmit:e=>{e.preventDefault(),R(1)},className:"flex-1 max-w-lg",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"搜尋嚮導姓名或專業...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("button",{onClick:()=>z(!E),className:`flex items-center px-4 py-2 border rounded-lg transition-colors ${E||U?"border-blue-500 text-blue-600 bg-blue-50":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"篩選",U&&t.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:"!"})]}),(0,t.jsxs)("select",{value:`${q}_${A}`,onChange:e=>{let[s,a]=e.target.value.split("_");G(s||"rating"),$(a||"desc")},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"rating_desc",children:"評分高到低"}),t.jsx("option",{value:"rating_asc",children:"評分低到高"}),t.jsx("option",{value:"services_desc",children:"服務數量多到少"}),t.jsx("option",{value:"services_asc",children:"服務數量少到多"}),t.jsx("option",{value:"experience_desc",children:"經驗豐富到新手"}),t.jsx("option",{value:"experience_asc",children:"新手到經驗豐富"}),t.jsx("option",{value:"name_asc",children:"姓名 A-Z"}),t.jsx("option",{value:"name_desc",children:"姓名 Z-A"})]})]})]}),E&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"地點"}),(0,t.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"所有地點"}),p.locations.map(e=>(0,t.jsxs)("option",{value:e.location,children:[e.location," (",e._count.location,")"]},e.location))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"語言"}),(0,t.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"所有語言"}),p.languages.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"專業領域"}),(0,t.jsxs)("select",{value:P,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"所有專業"}),p.specialties.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最低評分"}),(0,t.jsxs)("select",{value:S,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"不限"}),t.jsx("option",{value:"4.5",children:"4.5+ 星"}),t.jsx("option",{value:"4",children:"4+ 星"}),t.jsx("option",{value:"3.5",children:"3.5+ 星"}),t.jsx("option",{value:"3",children:"3+ 星"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最少經驗年數"}),(0,t.jsxs)("select",{value:C,onChange:e=>Z(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"不限"}),t.jsx("option",{value:"1",children:"1+ 年"}),t.jsx("option",{value:"2",children:"2+ 年"}),t.jsx("option",{value:"3",children:"3+ 年"}),t.jsx("option",{value:"5",children:"5+ 年"}),t.jsx("option",{value:"10",children:"10+ 年"})]})]}),U&&(0,t.jsxs)("button",{onClick:M,className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:[t.jsx(n.Z,{className:"w-4 h-4 mr-1"}),"清除篩選"]})]})]})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["找到 ",u.total," 位嚮導",U&&t.jsx("span",{className:"ml-2 text-blue-600",children:"(已套用篩選條件)"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["第 ",u.page," 頁，共 ",u.pages," 頁"]})]}),d?t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:6},(e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex space-x-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[t.jsx("div",{className:"h-3 bg-gray-200 rounded"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/5"})]})]},s))}):0===s.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(c.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到符合條件的嚮導"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"試試調整搜尋條件或清除篩選器"}),U&&t.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"清除所有篩選"})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(e=>t.jsx(h,{guide:e},e.id))}),u.pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[t.jsx("button",{onClick:()=>R(u.page-1),disabled:!u.hasPrev,className:"px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"上一頁"}),Array.from({length:Math.min(5,u.pages)},(e,s)=>{let a=Math.max(1,u.page-2)+s;return a>u.pages?null:t.jsx("button",{onClick:()=>R(a),className:`px-3 py-2 border rounded-md ${a===u.page?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:a},a)}),t.jsx("button",{onClick:()=>R(u.page+1),disabled:!u.hasNext,className:"px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"下一頁"})]})]})]})}},22107:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d,metadata:()=>c});var t=a(25036);a(40002);let r=(0,a(86843).createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/components/guides/guides-list.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,c={title:"尋找在地嚮導 | Guidee",description:"探索專業在地嚮導，享受個人化旅遊體驗"};function d(){return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white border-b border-gray-200",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"尋找完美的在地嚮導"}),t.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"與經驗豐富的在地專家一起探索世界，享受個人化的旅遊體驗"})]})})}),t.jsx(n,{})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[1216,8039,4757,8290],()=>a(16992));module.exports=t})();