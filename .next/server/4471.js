exports.id=4471,exports.ids=[4471],exports.modules={20743:(e,s,t)=>{Promise.resolve().then(t.bind(t,36515))},36515:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AdminLayout:()=>z});var a=t(95344),r=t(3729),i=t(22254),l=t(2273),n=t(89895),o=t(23485),d=t(80508),c=t(55794),m=t(35851),x=t(76755),h=t(50340),u=t(13746),b=t(14513),f=t(18822),g=t(48120),v=t(98200),p=t(28765),j=t(33037),N=t(63024),w=t(25390),y=t(5094),k=t(19591),C=t(62455),Z=t(16676);function z({children:e}){let s=(0,i.useRouter)(),t=(0,i.usePathname)(),{t:z}=(0,C.Q)(),[S,A]=(0,r.useState)(null),[P,R]=(0,r.useState)(!1),[$,D]=(0,r.useState)(3),[M,T]=(0,r.useState)(!1),[L,O]=(0,r.useState)([]);(0,r.useEffect)(()=>{A({name:"演示管理員",email:"demo@guidee.com",role:"ADMIN"}),W()},[]);let W=async()=>{try{let e=await fetch("/api/admin/notifications");if(e.ok){let s=await e.json();s.success&&(O(s.notifications||[]),D(s.unreadCount||0))}}catch(e){}},G=e=>{T(!1),e.action&&s.push(e.action)},I=async()=>{try{await fetch("/api/admin/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAllAsRead:!0})}),D(0),O(e=>e.map(e=>({...e,read:!0})))}catch(e){}},B=e=>{switch(e){case"chat":return"bg-blue-500";case"service":return"bg-green-500";case"booking":return"bg-purple-500";case"user":return"bg-orange-500";default:return"bg-gray-500"}},E=e=>{let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/6e4);return a<1?"剛剛":a<60?`${a} 分鐘前`:a<1440?`${Math.floor(a/60)} 小時前`:t.toLocaleDateString()},U=[{id:"dashboard",label:z("admin.nav.dashboard"),icon:a.jsx(l.Z,{className:"h-5 w-5"}),href:"/admin"},{id:"users",label:z("admin.nav.users"),icon:a.jsx(n.Z,{className:"h-5 w-5"}),href:"/admin/users"},{id:"guides",label:z("admin.nav.guides"),icon:a.jsx(o.Z,{className:"h-5 w-5"}),href:"/admin/guides"},{id:"services",label:z("admin.nav.services"),icon:a.jsx(d.Z,{className:"h-5 w-5"}),href:"/admin/services",badge:2},{id:"bookings",label:z("admin.nav.bookings"),icon:a.jsx(c.Z,{className:"h-5 w-5"}),href:"/admin/bookings"},{id:"chat",label:z("admin.nav.chat"),icon:a.jsx(m.Z,{className:"h-5 w-5"}),href:"/admin/chat",badge:23},{id:"reviews",label:z("admin.nav.reviews"),icon:a.jsx(x.Z,{className:"h-5 w-5"}),href:"/admin/reviews"},{id:"analytics",label:z("admin.nav.analytics"),icon:a.jsx(h.Z,{className:"h-5 w-5"}),href:"/admin/analytics"},{id:"settings",label:z("admin.nav.settings"),icon:a.jsx(u.Z,{className:"h-5 w-5"}),href:"/admin/settings"}],V=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s.push("/admin/login")}catch(e){}},F=e=>"/admin"===e?"/admin"===t:t.startsWith(e);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,a.jsxs)("div",{className:`fixed inset-y-0 left-0 z-50 w-72 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 shadow-2xl transform transition-all duration-300 ease-in-out ${P?"translate-x-0":"-translate-x-full"} lg:translate-x-0 backdrop-blur-xl`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-20 px-6 border-b border-slate-700/50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(o.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("span",{className:"text-white font-bold text-xl tracking-tight",children:"Guidee"}),a.jsx("p",{className:"text-slate-400 text-xs font-medium tracking-wider",children:"ADMIN PANEL"})]})]}),a.jsx("button",{onClick:()=>R(!1),className:"lg:hidden text-slate-400 hover:text-white hover:bg-slate-700 p-2 rounded-lg transition-all duration-200",children:a.jsx(b.Z,{className:"h-5 w-5"})})]}),a.jsx("nav",{className:"mt-8 px-4",children:a.jsx("div",{className:"space-y-1",children:U.map(e=>(0,a.jsxs)("button",{onClick:()=>{s.push(e.href),R(!1)},className:`group w-full flex items-center justify-between px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 ${F(e.href)?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg transform scale-[0.98]":"text-slate-300 hover:text-white hover:bg-slate-700/50 hover:transform hover:scale-[0.98]"} relative overflow-hidden`,children:[(0,a.jsxs)("div",{className:"flex items-center relative z-10",children:[a.jsx("div",{className:`p-1.5 rounded-lg ${F(e.href)?"bg-white/20":"group-hover:bg-slate-600/50"} transition-colors duration-200`,children:e.icon}),a.jsx("span",{className:"ml-3 font-medium",children:e.label})]}),e.badge&&a.jsx(k.Ct,{variant:"destructive",className:"text-xs bg-red-500 hover:bg-red-600 border-0 shadow-lg",children:e.badge}),F(e.href)&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-100"})]},e.id))})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700/50 bg-slate-800/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center bg-slate-700/30 rounded-xl p-3 hover:bg-slate-700/50 transition-all duration-200",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(f.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-white",children:S?.userProfile?.name||S?.name||z("admin.common.role.admin")}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:S?.email}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),a.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Online"})]})]}),a.jsx("button",{onClick:V,className:"text-slate-400 hover:text-red-400 hover:bg-red-500/10 p-2 rounded-lg transition-all duration-200 group",title:z("admin.nav.logout"),children:a.jsx(g.Z,{className:"h-5 w-5 group-hover:rotate-12 transition-transform duration-200"})})]})})]}),(0,a.jsxs)("div",{className:"lg:ml-72",children:[(0,a.jsxs)("header",{className:"bg-white/95 shadow-sm border-b border-slate-200/50 h-20 flex items-center justify-between px-8 relative",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>R(!0),className:"lg:hidden text-slate-600 hover:text-slate-900 hover:bg-slate-100 p-2 rounded-lg transition-all duration-200",children:a.jsx(v.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"ml-6 lg:ml-0 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(p.Z,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",placeholder:z("admin.common.search"),className:"block w-80 pl-12 pr-4 py-3 border-0 bg-slate-100/50 rounded-xl text-sm placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:bg-white transition-all duration-200 backdrop-blur-sm"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"relative",children:a.jsx(Z.W,{variant:"dropdown",showFlag:!0,showNativeName:!1,className:""})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>T(!M),className:"relative p-3 text-slate-500 hover:text-slate-700 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 rounded-xl transition-all duration-200 group",children:[a.jsx(j.Z,{className:"h-5 w-5 group-hover:animate-pulse"}),$>0&&a.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-gradient-to-r from-red-500 to-red-600 text-xs font-bold text-white shadow-lg animate-bounce",children:$})]}),M&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-xl shadow-2xl border border-slate-200 z-[9999] max-h-96 overflow-y-auto",children:[a.jsx("div",{className:"p-4 border-b border-slate-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:"通知中心"}),a.jsx("button",{onClick:I,className:"text-sm text-blue-600 hover:text-blue-700",children:"全部標為已讀"})]})}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:L.length>0?L.map(e=>a.jsx("div",{onClick:()=>G(e),className:"p-4 border-b border-slate-50 hover:bg-slate-50 cursor-pointer transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)("div",{className:`p-2 rounded-full ${B(e.type)}`,children:["chat"===e.type&&a.jsx(m.Z,{className:"h-4 w-4 text-white"}),"service"===e.type&&a.jsx(u.Z,{className:"h-4 w-4 text-white"}),"booking"===e.type&&a.jsx(c.Z,{className:"h-4 w-4 text-white"}),"user"===e.type&&a.jsx(n.Z,{className:"h-4 w-4 text-white"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-900",children:e.title}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.message}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:E(e.timestamp)})]}),!e.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},e.id)):(0,a.jsxs)("div",{className:"p-8 text-center text-slate-500",children:[a.jsx(j.Z,{className:"h-8 w-8 mx-auto mb-2 text-slate-300"}),a.jsx("p",{children:"沒有新通知"})]})})]})]}),(0,a.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>s.push("/"),className:"hidden md:flex bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 transition-all duration-200 rounded-xl px-4 py-2",children:[a.jsx(N.Z,{className:"h-4 w-4 mr-2"}),z("admin.common.return_home")]}),a.jsx("div",{className:"relative",children:(0,a.jsxs)("button",{className:"flex items-center space-x-3 text-sm text-slate-700 hover:text-slate-900 focus:outline-none bg-gradient-to-r from-slate-50 to-slate-100 hover:from-slate-100 hover:to-slate-200 rounded-xl p-2 transition-all duration-200 border border-slate-200 shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-sm",children:a.jsx(f.Z,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"font-semibold text-slate-800",children:S?.name||z("admin.common.role.admin")}),a.jsx("p",{className:"text-xs text-slate-500",children:z("admin.common.role.admin")})]}),a.jsx(w.Z,{className:"h-4 w-4 text-slate-500"})]})})]})]}),a.jsx("main",{className:"flex-1 p-8 bg-gradient-to-br from-slate-50/50 via-blue-50/30 to-indigo-50/50 min-h-screen",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]}),P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>R(!1)})]})}},19591:(e,s,t)=>{"use strict";t.d(s,{Ct:()=>l});var a=t(95344);let r={default:{backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb"},secondary:{backgroundColor:"#f1f5f9",color:"#475569",border:"1px solid #cbd5e1"},destructive:{backgroundColor:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca"},success:{backgroundColor:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0"},warning:{backgroundColor:"#fef3c7",color:"#92400e",border:"1px solid #fcd34d"},error:{backgroundColor:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca"},info:{backgroundColor:"#eff6ff",color:"#1e40af",border:"1px solid #bfdbfe"},outline:{backgroundColor:"transparent",color:"#374151",border:"1px solid #d1d5db"}},i={sm:{fontSize:"0.75rem",padding:"0.125rem 0.5rem",borderRadius:"0.25rem"},md:{fontSize:"0.875rem",padding:"0.25rem 0.75rem",borderRadius:"0.375rem"},lg:{fontSize:"1rem",padding:"0.375rem 1rem",borderRadius:"0.5rem"}};function l({children:e,variant:s="default",size:t="md",className:l="",onClick:n}){let o=r[s],d=i[t],c=n?"button":"span";return a.jsx(c,{onClick:n,className:l,style:{...o,...d,fontWeight:"500",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",transition:"all 0.2s",cursor:n?"pointer":"default",border:o.border,...n&&{":hover":{opacity:.8}}},children:e})}},5094:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var a=t(95344),r=t(3729),i=t(32751),l=t(49247),n=t(11453);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",guidee:"bg-gradient-guidee text-white hover:shadow-guidee-lg"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,loading:l=!1,children:d,disabled:c,...m},x)=>{let h=r?i.g7:"button",u=l?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]}):d;return a.jsx(h,{className:(0,n.cn)(o({variant:s,size:t,className:e})),ref:x,disabled:c||l,...m,children:u})});d.displayName="Button"},58185:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(25036),r=t(86843);let i=(0,r.createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/components/admin/admin-layout.tsx`),{__esModule:l,$$typeof:n}=i;i.default;let o=(0,r.createProxy)(String.raw`/Users/zoechang/projects/Guidee/src/components/admin/admin-layout.tsx#AdminLayout`);function d({children:e}){return a.jsx(o,{children:e})}}};