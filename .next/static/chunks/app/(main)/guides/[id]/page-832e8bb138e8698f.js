(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3413],{9385:function(e,s,a){Promise.resolve().then(a.bind(a,1281))},1281:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var l=a(7437),t=a(2265),i=a(1396),r=a.n(i),c=a(1291),n=a(3008),d=a(6142),x=a(2245),m=a(5750),h=a(8203),o=a(7810),g=a(1274),j=a(8956),N=a(2505),f=a(7158),u=a(6141),v=a(2176),b=a(2741),p=a(9036);function y(e){var s;let{guideId:a}=e,[i,y]=(0,t.useState)(null),[w,Z]=(0,t.useState)(!0),[k,R]=(0,t.useState)(null),[S,A]=(0,t.useState)({}),[E,_]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=async()=>{try{Z(!0);let e=await fetch("/api/guides/".concat(a));if(!e.ok)throw Error("Failed to fetch guide profile");let s=(await e.json()).data;y(s),R(null)}catch(e){R(e instanceof Error?e.message:"載入嚮導資料失敗")}finally{Z(!1)}};a&&e()},[a]);let C=e=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e),D=e=>new Date(e).toLocaleDateString("zh-TW",{year:"numeric",month:"long"}),F=(e,s)=>{A(a=>({...a,[e]:((a[e]||0)+1)%s}))},T=(e,s)=>{A(a=>({...a,[e]:((a[e]||0)-1+s)%s}))};return w?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsx)("div",{className:"animate-pulse",children:(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,l.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,l.jsx)("div",{className:"w-32 h-32 bg-gray-200 rounded-full"}),(0,l.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})})}):k||!i?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-red-500 mb-4",children:k||"找不到嚮導資料"}),(0,l.jsx)(r(),{href:"/guides",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"返回嚮導列表"})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)(r(),{href:"/guides",className:"inline-flex items-center text-gray-600 hover:text-gray-900",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 mr-1"}),"返回嚮導列表"]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-full overflow-hidden",children:i.avatar?(0,l.jsx)("img",{src:i.avatar,alt:i.name||"Guide avatar",className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-4xl font-semibold",children:(null===(s=i.name)||void 0===s?void 0:s.charAt(0))||"?"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:i.name||"Unknown Guide"}),i.verifications.identity&&(0,l.jsxs)("div",{className:"flex items-center px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[(0,l.jsx)(n.Z,{className:"w-3 h-3 mr-1"}),"已認證"]})]}),i.location&&(0,l.jsxs)("div",{className:"flex items-center text-gray-600 mb-3",children:[(0,l.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),i.location]}),(0,l.jsxs)("div",{className:"flex items-center space-x-6 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(x.Z,{className:"w-5 h-5 text-yellow-400 fill-current mr-1"}),(0,l.jsx)("span",{className:"text-xl font-semibold text-gray-900",children:i.stats.averageRating}),(0,l.jsxs)("span",{className:"text-gray-600 ml-1",children:["(",i.stats.totalReviews," 評論)"]})]}),(0,l.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),i.stats.totalBookings," 次預訂"]}),(0,l.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,l.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),i.experienceYears||0," 年經驗"]})]}),i.bio&&(0,l.jsx)("p",{className:"text-gray-700 leading-relaxed",children:i.bio})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>_(!E),className:"p-2 rounded-lg transition-colors ".concat(E?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"),children:(0,l.jsx)(o.Z,{className:"w-5 h-5 ".concat(E?"fill-current":"")})}),(0,l.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg",children:(0,l.jsx)(g.Z,{className:"w-5 h-5"})})]})]}),(0,l.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.languages.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[(0,l.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),"語言能力"]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:i.languages.map((e,s)=>(0,l.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:e},s))})]}),i.specialties.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[(0,l.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"專業領域"]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:i.specialties.map((e,s)=>(0,l.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:e},s))})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"提供的服務"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.services.map(e=>{let s=S[e.id]||0;return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.images.length>0&&(0,l.jsxs)("div",{className:"relative h-48 bg-gray-200",children:[(0,l.jsx)("img",{src:e.images[s],alt:e.title,className:"w-full h-full object-cover"}),e.images.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>T(e.id,e.images.length),className:"absolute left-2 top-1/2 transform -translate-y-1/2 p-1 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75",children:(0,l.jsx)(c.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>F(e.id,e.images.length),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75",children:(0,l.jsx)(f.Z,{className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:e.images.map((e,a)=>(0,l.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a===s?"bg-white":"bg-white bg-opacity-50")},a))})]})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,l.jsx)("span",{className:"text-lg font-bold text-blue-600",children:C(e.price)})]}),e.description&&(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(d.Z,{className:"w-3 h-3 mr-1"}),e.location]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),e.duration," 小時"]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(m.Z,{className:"w-3 h-3 mr-1"}),"最多 ",e.maxGuests," 人"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),(0,l.jsx)("span",{className:"font-medium",children:e.averageRating}),(0,l.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",e.totalReviews,")"]})]}),(0,l.jsx)(r(),{href:"/services/".concat(e.id),className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"查看詳情"})]})]})]},e.id)})})]}),i.recentReviews.length>0&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"最新評價"}),(0,l.jsx)("div",{className:"space-y-6",children:i.recentReviews.map(e=>{var s;return(0,l.jsx)("div",{className:"border-b border-gray-100 last:border-b-0 pb-6 last:pb-0",children:(0,l.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:e.isAnonymous||!e.reviewer?(0,l.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"匿"})}):(0,l.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full overflow-hidden",children:e.reviewer.avatar?(0,l.jsx)("img",{src:e.reviewer.avatar,alt:e.reviewer.name||"Reviewer avatar",className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm font-semibold",children:(null===(s=e.reviewer.name)||void 0===s?void 0:s.charAt(0))||"?"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e.isAnonymous||!e.reviewer?"匿名用戶":e.reviewer.name||"未知用戶"}),(0,l.jsx)("div",{className:"flex items-center",children:Array.from({length:5},(s,a)=>(0,l.jsx)(x.Z,{className:"w-4 h-4 ".concat(a<e.rating?"text-yellow-400 fill-current":"text-gray-300")},a))}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:D(e.createdAt)})]}),(0,l.jsx)("p",{className:"text-gray-700 mb-2",children:e.comment}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["服務項目: ",e.service.title]})]})]})},e.id)})})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"聯繫嚮導"}),(0,l.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"平均回覆時間"}),(0,l.jsxs)("span",{className:"font-medium",children:[i.stats.responseTime," 小時內"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"回覆率"}),(0,l.jsxs)("span",{className:"font-medium",children:[i.stats.responseRate,"%"]})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,l.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"發送訊息"]}),i.verifications.phone&&(0,l.jsxs)("button",{className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"致電詢問"]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"統計資料"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"總預訂數"}),(0,l.jsx)("span",{className:"font-semibold",children:i.stats.totalBookings})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"本月預訂"}),(0,l.jsx)("span",{className:"font-semibold",children:i.stats.monthlyBookings})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"活躍服務"}),(0,l.jsx)("span",{className:"font-semibold",children:i.stats.activeServices})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"加入時間"}),(0,l.jsx)("span",{className:"font-semibold",children:D(i.memberSince)})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"評分分佈"}),(0,l.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>{let s=i.ratingDistribution[e]||0,a=i.stats.totalReviews>0?s/i.stats.totalReviews*100:0;return(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-sm w-3",children:e}),(0,l.jsx)(x.Z,{className:"w-3 h-3 text-yellow-400 fill-current ml-1"})]}),(0,l.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:"".concat(a,"%")}})}),(0,l.jsx)("span",{className:"text-sm text-gray-600 w-8",children:s})]},e)})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"身份驗證"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(n.Z,{className:"w-5 h-5 ".concat(i.verifications.email?"text-green-500":"text-gray-300")}),(0,l.jsx)("span",{className:"text-sm",children:"電子信箱驗證"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(n.Z,{className:"w-5 h-5 ".concat(i.verifications.phone?"text-green-500":"text-gray-300")}),(0,l.jsx)("span",{className:"text-sm",children:"手機號碼驗證"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(p.Z,{className:"w-5 h-5 ".concat(i.verifications.identity?"text-green-500":"text-gray-300")}),(0,l.jsx)("span",{className:"text-sm",children:"身份證件驗證"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(n.Z,{className:"w-5 h-5 ".concat(i.verifications.profile?"text-green-500":"text-gray-300")}),(0,l.jsx)("span",{className:"text-sm",children:"個人檔案完整"})]})]})]})]})]})]})})}}},function(e){e.O(0,[1216,1744],function(){return e(e.s=9385)}),_N_E=e.O()}]);