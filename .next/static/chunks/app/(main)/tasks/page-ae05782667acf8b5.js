(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7069],{1575:function(e,s,t){Promise.resolve().then(t.bind(t,784))},784:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(7437),r=t(2265),l=t(4033),c=t(5790),n=t(1981),i=t(3008),d=t(2104),x=t(734),m=t(5750),o=t(1827),g=t(2482),h=t(3523),u=t(9883),b=t(6142),j=t(8203),p=t(6141),y=t(1298),f=t(9670),N=t(2176),w=t(2245),v=t(1138),F=t(8956),Z=t(8228),A=t(7290),k=t(5022);function C(){let e=(0,l.useRouter)(),{user:s,isAuthenticated:t}=(0,Z.a)(),{success:C,error:_}=(0,A.pm)(),[L,T]=(0,r.useState)("my-tasks"),[S,D]=(0,r.useState)("all"),[E,R]=(0,r.useState)(""),[U,W]=(0,r.useState)(!1),[q,B]=(0,r.useState)(!0),[z,O]=(0,r.useState)([]),[P,$]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(!t){e.push("/login");return}G()},[t,e]);let G=async()=>{B(!0);try{let e=[{id:"task-1",title:"台北古蹟文化深度導覽",description:"希望找到一位熟悉台北歷史文化的地陪，帶我們參觀故宮、中正紀念堂等重要景點，並深入了解背後的歷史故事。",category:"文化導覽",location:"台北市",budget:{min:1500,max:2500,currency:"TWD"},dateRange:{start:"2024-01-25",end:"2024-01-27",flexible:!0},duration:"6小時",maxApplicants:5,currentApplicants:3,requirements:["熟悉台北歷史","中英文流利","有導遊證照"],status:"active",createdBy:(null==s?void 0:s.id)||"",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z",priority:"high",isUrgent:!1,tags:["文化","歷史","故宮","古蹟"]},{id:"task-2",title:"夜市美食探索之旅",description:"想要體驗正宗的台灣夜市文化，尋找道地的小吃和隱藏版美食。",category:"美食體驗",location:"台北市",budget:{min:800,max:1200,currency:"TWD"},dateRange:{start:"2024-01-20",end:"2024-01-22",flexible:!1},duration:"4小時",maxApplicants:3,currentApplicants:1,requirements:["熟悉夜市","美食達人"],status:"in_progress",createdBy:(null==s?void 0:s.id)||"",createdAt:"2024-01-12T15:30:00Z",updatedAt:"2024-01-14T09:15:00Z",priority:"medium",isUrgent:!0,tags:["美食","夜市","小吃","在地體驗"]},{id:"task-3",title:"九份金瓜石攝影之旅",description:"專業攝影師陪同拍攝九份老街和金瓜石的美景，包含日落和夜景。",category:"攝影服務",location:"新北市瑞芳區",budget:{min:2e3,max:3500,currency:"TWD"},dateRange:{start:"2024-02-01",end:"2024-02-03",flexible:!0},duration:"8小時",maxApplicants:2,currentApplicants:0,requirements:["攝影技能","熟悉九份","有專業設備"],status:"draft",createdBy:(null==s?void 0:s.id)||"",createdAt:"2024-01-16T11:20:00Z",updatedAt:"2024-01-16T11:20:00Z",priority:"low",isUrgent:!1,tags:["攝影","九份","金瓜石","日落","夜景"]}];O(e)}catch(e){_("載入失敗","無法載入任務列表")}finally{B(!1)}},H=z.filter(e=>{let s="all"===S||e.status===S,t=""===E||e.title.toLowerCase().includes(E.toLowerCase())||e.description.toLowerCase().includes(E.toLowerCase())||e.location.toLowerCase().includes(E.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(E.toLowerCase())),a="all"===P||"全部"===P||e.category===P;return s&&t&&a}),I=e=>({draft:"草稿",active:"進行中",in_progress:"執行中",completed:"已完成",cancelled:"已取消"})[e],J=e=>({draft:"bg-gray-100 text-gray-800",active:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e],K=e=>{switch(e){case"active":return(0,a.jsx)(c.Z,{className:"w-4 h-4"});case"in_progress":return(0,a.jsx)(n.Z,{className:"w-4 h-4"});case"completed":return(0,a.jsx)(i.Z,{className:"w-4 h-4"});case"cancelled":return(0,a.jsx)(d.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(x.Z,{className:"w-4 h-4"})}};return q?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)(k.gb,{size:"lg"})})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"任務管理"}),(0,a.jsx)("p",{className:"text-gray-600",children:"發布任務需求，找到完美的旅遊協助"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,a.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>T("my-tasks"),className:"px-6 py-4 text-sm font-medium transition-colors ".concat("my-tasks"===L?"text-[#FF5A5F] border-b-2 border-[#FF5A5F]":"text-gray-600 hover:text-gray-900"),children:"我的任務"}),(0,a.jsx)("button",{onClick:()=>T("browse-tasks"),className:"px-6 py-4 text-sm font-medium transition-colors ".concat("browse-tasks"===L?"text-[#FF5A5F] border-b-2 border-[#FF5A5F]":"text-gray-600 hover:text-gray-900"),children:"瀏覽任務"}),(0,a.jsx)("button",{onClick:()=>T("create-task"),className:"px-6 py-4 text-sm font-medium transition-colors ".concat("create-task"===L?"text-[#FF5A5F] border-b-2 border-[#FF5A5F]":"text-gray-600 hover:text-gray-900"),children:"發布任務"})]})}),"my-tasks"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"總任務"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-blue-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"進行中"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z.filter(e=>"active"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-yellow-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"已完成"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z.filter(e=>"completed"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"申請者"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z.reduce((e,s)=>e+s.currentApplicants,0)})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-purple-600"})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"搜尋任務...",value:E,onChange:e=>R(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#FF5A5F] focus:border-[#FF5A5F]"})]}),(0,a.jsx)("select",{value:P,onChange:e=>$(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#FF5A5F] focus:border-[#FF5A5F]",children:["全部","文化導覽","美食體驗","攝影服務","購物助手","交通協助","其他"].map(e=>(0,a.jsx)("option",{value:"全部"===e?"all":e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>W(!U),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:border-[#FF5A5F] transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"篩選",(0,a.jsx)(h.Z,{className:"w-4 h-4 transition-transform ".concat(U?"rotate-180":"")})]}),(0,a.jsxs)("button",{onClick:()=>T("create-task"),className:"flex items-center gap-2 px-4 py-2 bg-[#FF5A5F] text-white rounded-lg hover:bg-[#E1464A] transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"發布任務"]})]})]}),U&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 w-full mb-2",children:"狀態篩選："}),["all","draft","active","in_progress","completed","cancelled"].map(e=>(0,a.jsx)("button",{onClick:()=>D(e),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(S===e?"bg-[#FF5A5F] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===e?"全部":I(e)},e))]})})]}),H.length>0?(0,a.jsx)("div",{className:"space-y-4",children:H.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.isUrgent&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:"緊急"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(J(e.status)),children:[K(e.status),I(e.status)]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:e.category})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.location})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(e.dateRange.start).toLocaleDateString("zh-TW")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.duration})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["NT$ ",e.budget.min.toLocaleString()," - ",e.budget.max.toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.currentApplicants,"/",e.maxApplicants," 申請者"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:e},s))})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 lg:min-w-[150px]",children:["active"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:"btn btn-primary btn-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"查看申請"]}),(0,a.jsxs)("button",{className:"btn btn-secondary btn-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"編輯"]})]}),"draft"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"btn btn-primary btn-sm",children:"發布任務"}),(0,a.jsxs)("button",{className:"btn btn-secondary btn-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"編輯"]})]}),"in_progress"===e.status&&(0,a.jsxs)("button",{className:"btn btn-primary btn-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"聊天"]}),"completed"===e.status&&(0,a.jsxs)("button",{className:"btn btn-secondary btn-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),"評價"]}),(0,a.jsxs)("button",{className:"btn btn-ghost btn-sm flex items-center justify-center gap-2 text-red-600 hover:text-red-700",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"刪除"]})]})]})},e.id))}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===S?"還沒有任何任務":"沒有".concat(I(S),"的任務")}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===S?"發布您的第一個任務，找到完美的旅遊協助！":"試試調整篩選條件或發布新任務"}),(0,a.jsx)("button",{onClick:()=>T("create-task"),className:"btn btn-primary",children:"發布任務"})]})]}),"browse-tasks"===L&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(F.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"瀏覽任務功能"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"此功能開發中，即將為您提供豐富的任務瀏覽體驗"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"未來您可以在這裡瀏覽其他旅客發布的任務，並申請成為他們的地陪"})]}),"create-task"===L&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"發布任務功能"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"此功能開發中，即將為您提供完整的任務發布流程"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"未來您可以在這裡詳細描述您的需求，設定預算和時間，找到最適合的地陪"})]})]})})}}},function(e){e.O(0,[1216,1248,1744],function(){return e(e.s=1575)}),_N_E=e.O()}]);